!function n(s,o,i){function a(t,e){if(!o[t]){if(!s[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},s[t][0].call(r.exports,function(e){return a(s[t][1][e]||e)},r,r.exports,n,s,o,i)}return o[t].exports}for(var u="function"==typeof require&&require,e=0;e<i.length;e++)a(i[e]);return a}({1:[function(e,Fe,ke){!function(Be){!function(){var n="__lodash_hash_undefined__",q=1,K=2,M=9007199254740991,B="[object Arguments]",F="[object Array]",S="[object AsyncFunction]",J="[object Boolean]",Q="[object Date]",X="[object Error]",I="[object Function]",x="[object GeneratorFunction]",k="[object Map]",Y="[object Number]",j="[object Null]",A="[object Object]",T="[object Promise]",L="[object Proxy]",Z="[object RegExp]",N="[object Set]",ee="[object String]",te="[object Symbol]",O="[object Undefined]",r="[object WeakMap]",re="[object ArrayBuffer]",H="[object DataView]",R=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,t={},e=(t["[object Float32Array]"]=t["[object Float64Array]"]=t["[object Int8Array]"]=t["[object Int16Array]"]=t["[object Int32Array]"]=t["[object Uint8Array]"]=t["[object Uint8ClampedArray]"]=t["[object Uint16Array]"]=t["[object Uint32Array]"]=!0,t[B]=t[F]=t[re]=t[J]=t[H]=t[Q]=t[X]=t[I]=t[k]=t[Y]=t[A]=t[Z]=t[N]=t[ee]=t[r]=!1,"object"==typeof Be&&Be&&Be.Object===Object&&Be),s="object"==typeof self&&self&&self.Object===Object&&self,s=e||s||Function("return this")(),o="object"==typeof ke&&ke&&!ke.nodeType&&ke,i=o&&"object"==typeof Fe&&Fe&&!Fe.nodeType&&Fe,i=i&&i.exports===o,a=i&&e.process,o=function(){try{return a&&a.binding&&a.binding("util")}catch(e){}}(),e=o&&o.isTypedArray;function ne(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n}function se(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var D,U,o=Array.prototype,u=Function.prototype,c=Object.prototype,h=s["__core-js_shared__"],oe=u.toString,z=c.hasOwnProperty,ie=(u=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",ae=c.toString,ue=RegExp("^"+oe.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=i?s.Buffer:void 0,u=s.Symbol,ce=s.Uint8Array,he=c.propertyIsEnumerable,le=o.splice,l=u?u.toStringTag:void 0,pe=Object.getOwnPropertySymbols,i=h?h.isBuffer:void 0,de=(D=Object.keys,U=Object,function(e){return D(U(e))}),o=_(s,"DataView"),p=_(s,"Map"),h=_(s,"Promise"),d=_(s,"Set"),s=_(s,"WeakMap"),f=_(Object,"create"),fe=P(o),me=P(p),be=P(h),ge=P(d),we=P(s),u=u?u.prototype:void 0,ve=u?u.valueOf:void 0;function m(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function b(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function g(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function w(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new g;++t<r;)this.add(e[t])}function G(e){e=this.__data__=new b(e);this.size=e.size}function ye(e,t){var r,n,s,o=V(e),i=!o&&Te(e),a=!o&&!i&&Le(e),u=!o&&!i&&!a&&Ue(e),c=o||i||a||u,h=c?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=h.length;for(r in e)!t&&!z.call(e,r)||c&&("length"==r||a&&("offset"==r||"parent"==r)||u&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||(n=r,(s=null==(s=l)?M:s)&&("number"==typeof n||C.test(n))&&-1<n&&n%1==0&&n<s))||h.push(r);return h}function v(e,t){for(var r=e.length;r--;)if(je(e[r][0],t))return r;return-1}function y(e){{if(null==e)return void 0===e?O:j;if(l&&l in Object(e)){var t=e,r=z.call(t,l),n=t[l];try{var s=!(t[l]=void 0)}catch(e){}var o=ae.call(t);return s&&(r?t[l]=n:delete t[l]),o}return ae.call(e)}}function Ee(e){return W(e)&&y(e)==B}function _e(e,t,r,n,s){{if(e===t)return!0;if(null==e||null==t||!W(e)&&!W(t))return e!=e&&t!=t;var o=_e,i=V(e),a=V(t),u=i?F:$(e),a=a?F:$(t),c=(u=u==B?A:u)==A,h=(a=a==B?A:a)==A,a;if((a=u==a)&&Le(e)){if(!Le(t))return!1;c=!(i=!0)}if(a&&!c){s=s||new G;if(i||Ue(e))return Se(e,t,r,n,o,s);else{var l=e;var p=t;var d=u;var f=r;var m=n;var b=o;var g=s;switch(d){case H:if(l.byteLength!=p.byteLength||l.byteOffset!=p.byteOffset)return!1;l=l.buffer,p=p.buffer;case re:return l.byteLength==p.byteLength&&b(new ce(l),new ce(p))?!0:!1;case J:case Q:case Y:return je(+l,+p);case X:return l.name==p.name&&l.message==p.message;case Z:case ee:return l==p+"";case k:var w=ne;case N:var v=f&q;if(w=w||se,l.size!=p.size&&!v)return!1;v=g.get(l);if(v)return v==p;f|=K,g.set(l,p);v=Se(w(l),w(p),f,m,b,g);return g.delete(l),v;case te:if(ve)return ve.call(l)==ve.call(p)}return!1;return}}if(!(r&q)){var i=c&&z.call(e,"__wrapped__"),u=h&&z.call(t,"__wrapped__");if(i||u)return c=i?e.value():e,h=u?t.value():t,s=s||new G,o(c,h,r,n,s)}if(a){s=s||new G;var y=e,E=t,_=r,P=n,M=o,S=s,I=_&q,x=Ie(y),j=x.length,i=Ie(E).length;if(j!=i&&!I)return!1;for(var T=j;T--;){var L=x[T];if(!(I?L in E:z.call(E,L)))return!1}if((i=S.get(y))&&S.get(E))return i==E;for(var O=!0,R=(S.set(y,E),S.set(E,y),I);++T<j;){L=x[T];var C,D=y[L],U=E[L];if(!(void 0===(C=P?I?P(U,D,L,E,y,S):P(D,U,L,y,E,S):C)?D===U||M(D,U,_,P,S):C)){O=!1;break}R=R||"constructor"==L}return O&&!R&&(i=y.constructor,u=E.constructor,i!=u&&"constructor"in y&&"constructor"in E&&!("function"==typeof i&&i instanceof i&&"function"==typeof u&&u instanceof u)&&(O=!1)),S.delete(y),S.delete(E),O}return!1}}function Pe(e){var t;if(Ce(e)&&(t=e,!(ie&&ie in t)))return(Oe(e)?ue:R).test(P(e))}function Me(e){if(r="function"==typeof(r=(t=e)&&t.constructor)&&r.prototype||c,t!==r)return de(e);var t,r,n,s=[];for(n in Object(e))z.call(e,n)&&"constructor"!=n&&s.push(n);return s}function Se(e,t,r,n,s,o){var i=r&q,a=e.length,u=t.length;if(a!=u&&!(i&&a<u))return!1;u=o.get(e);if(u&&o.get(t))return u==t;var c=-1,h=!0,l=r&K?new w:void 0;for(o.set(e,t),o.set(t,e);++c<a;){var p,d=e[c],f=t[c];if(void 0!==(p=n?i?n(f,d,c,t,e,o):n(d,f,c,e,t,o):p)){if(p)continue;h=!1;break}if(l){if(!function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return 1}(t,function(e,t){return!l.has(t)&&(d===e||s(d,e,r,n,o))&&l.push(t)})){h=!1;break}}else if(d!==f&&!s(d,f,r,n,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Ie(e){var t=qe,r=xe;if(t=t(e),V(e))return t;for(var n=t,s=r(e),o=-1,i=s.length,a=n.length;++o<i;)n[a+o]=s[o];return n}function E(e,t){var r,n,e=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?e["string"==typeof t?"string":"hash"]:e.map}function _(e,t){t=t;e=null==(e=e)?void 0:e[t];return Pe(e)?e:void 0}m.prototype.clear=function(){this.__data__=f?f(null):{},this.size=0},m.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},m.prototype.get=function(e){var t,r=this.__data__;return f?(t=r[e])===n?void 0:t:z.call(r,e)?r[e]:void 0},m.prototype.has=function(e){var t=this.__data__;return f?void 0!==t[e]:z.call(t,e)},m.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=f&&void 0===t?n:t,this},b.prototype.clear=function(){this.__data__=[],this.size=0},b.prototype.delete=function(e){var t=this.__data__;return!((e=v(t,e))<0)&&(e==t.length-1?t.pop():le.call(t,e,1),--this.size,!0)},b.prototype.get=function(e){var t=this.__data__;return(e=v(t,e))<0?void 0:t[e][1]},b.prototype.has=function(e){return-1<v(this.__data__,e)},b.prototype.set=function(e,t){var r=this.__data__,n=v(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},g.prototype.clear=function(){this.size=0,this.__data__={hash:new m,map:new(p||b),string:new m}},g.prototype.delete=function(e){return e=E(this,e).delete(e),this.size-=e?1:0,e},g.prototype.get=function(e){return E(this,e).get(e)},g.prototype.has=function(e){return E(this,e).has(e)},g.prototype.set=function(e,t){var r=E(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},w.prototype.add=w.prototype.push=function(e){return this.__data__.set(e,n),this},w.prototype.has=function(e){return this.__data__.has(e)},G.prototype.clear=function(){this.__data__=new b,this.size=0},G.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},G.prototype.get=function(e){return this.__data__.get(e)},G.prototype.has=function(e){return this.__data__.has(e)},G.prototype.set=function(e,t){var r=this.__data__;if(r instanceof b){var n=r.__data__;if(!p||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new g(n)}return r.set(e,t),this.size=r.size,this};var xe=pe?function(t){if(null==t)return[];t=Object(t);for(var e=pe(t),r=function(e){return he.call(t,e)},n=-1,s=null==e?0:e.length,o=0,i=[];++n<s;){var a=e[n];r(a,n,e)&&(i[o++]=a)}return i}:function(){return[]},$=y;function P(e){if(null!=e){try{return oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function je(e,t){return e===t||e!=e&&t!=t}(o&&$(new o(new ArrayBuffer(1)))!=H||p&&$(new p)!=k||h&&$(h.resolve())!=T||d&&$(new d)!=N||s&&$(new s)!=r)&&($=function(e){var t=y(e),e=t==A?e.constructor:void 0,e=e?P(e):"";if(e)switch(e){case fe:return H;case me:return k;case be:return T;case ge:return N;case we:return r}return t});var Te=Ee(function(){return arguments}())?Ee:function(e){return W(e)&&z.call(e,"callee")&&!he.call(e,"callee")},V=Array.isArray;var Le=i||function(){return!1};function Oe(e){if(Ce(e))return e=y(e),e==I||e==x||e==S||e==L}function Re(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=M}function Ce(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function W(e){return null!=e&&"object"==typeof e}var De,Ue=e?(De=e,function(e){return De(e)}):function(e){return W(e)&&Re(e.length)&&!!t[y(e)]};function qe(e){return(null!=(t=e)&&Re(t.length)&&!Oe(t)?ye:Me)(e);var t}Fe.exports=function(e,t){return _e(e,t)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(r,e,t){!function(t){!function(){var e=this.SENSORLIB||{REVISION:"0.0.1"};Object.assign(e,r("./sensors")),Object.assign(e,r("./error")),Object.assign(e,r("./actuators")),Object.assign(e,r("./util")),t.SENSORLIB=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./actuators":7,"./error":10,"./sensors":24,"./util":27}],3:[function(e,t,r){var n=e("./Subscriber.js");const s=e("../error/NotSupportedError");class o extends n{constructor(e,t){if(super(e,t),this.topic.messageType="std_msgs/Bool",!("mediaDevices"in navigator))throw new s("Browser does not support this feature");navigator.mediaDevices.enumerateDevices().then(e=>{e=e.filter(e=>"videoinput"===e.kind);if(0===e.length)throw Error("No camera found on this device");e=e[e.length-1];navigator.mediaDevices.getUserMedia({video:{deviceId:e.deviceId,facingMode:["user","environment"],height:{ideal:1080},width:{ideal:1920}}}).then(e=>{this.track=e.getVideoTracks()[0],this.imageCapture=new ImageCapture(this.track)})})}onMessage(e){this.imageCapture.getPhotoCapabilities().then(()=>{this.track.applyConstraints({advanced:[{torch:e.data}]})})}}t.exports=o},{"../error/NotSupportedError":8,"./Subscriber.js":5}],4:[function(e,t,r){var n=e("./Subscriber");const a=e("../error/NotSupportedError");class o extends n{constructor(e,t,r,n=!0){if(super(e,t),!(r instanceof window.HTMLCanvasElement))throw new TypeError("canvas argument must be of type HTMLCanvasElement");this.topic.messageType="sensor_msgs/CompressedImage",this.canvas=r,this.compressed=n,this.topic.messageType=this.getMessageType()}getMessageType(){return this.compressed?"sensor_msgs/CompressedImage":"sensor_msgs/Image"}static createImageDataUrl(e,t){return"data:image/"+e+";base64,"+t}drawImage(e){const t=this.canvas,r=t.getContext("2d"),n=new window.Image;n.onload=function(){r.drawImage(n,0,0,t.width,t.height)},n.onerror=function(){throw Error("could not draw image")},n.src=e}static convertImageData(e,t,r){if("rgb8"!==t&&"rgba8"!==t)throw new a("Subscriber only supports uncompressed images in rgb8 or rgba8 format");var n="rgba8"===t;const s=window.atob(e),o=new Uint8ClampedArray(4*r);let i=0;for(let e=0;e<o.length;e++)n||e%4!=3?(o[e]=s.charCodeAt(i),i++):o[e]=255;return o}onMessage(e){let t;if(this.compressed)t=o.createImageDataUrl(e.format,e.data);else{const n=document.createElement("canvas"),s=(n.width=e.width,n.height=e.height,n.getContext("2d"));var r=o.convertImageData(e.data,e.encoding,e.width*e.height),r=new window.ImageData(r,e.width,e.height);s.putImageData(r,0,0),t=n.toDataURL()}this.drawImage(t)}}t.exports=o},{"../error/NotSupportedError":8,"./Subscriber":5}],5:[function(e,t,r){t.exports=class{constructor(e,t){if(!(e instanceof ROSLIB.Ros))throw new TypeError("ros argument was not of type ROSLIB.Ros");if("string"!=typeof t)throw new TypeError("topicName argument was not of type String");this.ros=e,this.topicName=t,this.topic=new ROSLIB.Topic({ros:this.ros,name:this.topicName}),this.started=!1,this.onMessage=this.onMessage.bind(this)}onMessage(e){throw Error("onMessage method not defined!")}start(){if(this.started)throw new Error("Subscriber already started");this.topic.subscribe(this.onMessage),this.started=!0}stop(){if(!this.started)throw new Error("Subscriber did not start yet");this.topic.unsubscribe(this.onMessage),this.started=!1}}},{}],6:[function(e,t,r){e=e("./Subscriber.js");class n extends e{constructor(e,t,r){if(super(e,t),!(r instanceof window.HTMLElement))throw new TypeError("HTMLElement argument was not of type HTMLElement");this.topic.messageType="std_msgs/String",this.HTMLElement=r}onMessage(e){this.HTMLElement.innerHTML=e.data}}t.exports=n},{"./Subscriber.js":5}],7:[function(e,t,r){t.exports={TextSubscriber:e("./TextSubscriber"),ImageSubscriber:e("./ImageSubscriber"),FlashlightSubscriber:e("./FlashlightSubscriber")}},{"./FlashlightSubscriber":3,"./ImageSubscriber":4,"./TextSubscriber":6}],8:[function(e,t,r){class n extends Error{constructor(e){super(e),this.name="NotSupportedError"}}t.exports=n},{}],9:[function(e,t,r){class n extends Error{constructor(e){super(e),this.name="PermissionDeniedError"}}t.exports=n},{}],10:[function(e,t,r){t.exports={NotSupportedError:e("./NotSupportedError")}},{"./NotSupportedError":8}],11:[function(e,t,r){var n=e("./IntervalPublisher.js");const s=e("../error/NotSupportedError");class o extends n{constructor(e,t,r=1){if(!window.AmbientLightSensor)throw new s("Unable to create AmbientLightSensor, AmbientLight API not supported");super(e,t,r),this.topic.messageType="std_msgs/Int32",this.sensor=new AmbientLightSensor}start(){super.start(),this.sensor.addEventListener("reading",e=>{this.light=this.sensor.illuminance}),this.sensor.start()}stop(){super.stop(),this.sensor.stop(),this.sensor.removeEventListener("reading")}createSnapshot(){var e=new ROSLIB.Message({data:this.light});this.msg=e,super.createSnapshot()}}t.exports=o},{"../error/NotSupportedError":8,"./IntervalPublisher.js":19}],12:[function(e,t,r){var n=e("./SensorPublisher.js");const o=e("../util/styleUtils")["positionElement"];class i extends n{constructor(e,t,r){if(super(e,t),!(r instanceof window.HTMLButtonElement))throw new TypeError("button argument was not of type HTMLButtonElement");this.topic.messageType="std_msgs/Bool",this.button=r;let n=!1;this.onMouseDown=function(e){e.preventDefault(),n||(n=!0,e=this.createBoolMsg(!0),this.topic.publish(e))}.bind(this),this.onMouseUp=function(e){e.preventDefault(),n&&(n=!1,e=this.createBoolMsg(!1),this.topic.publish(e))}.bind(this)}createBoolMsg(e){return new ROSLIB.Message({data:e})}start(){super.start(),this.button.addEventListener("mousedown",this.onMouseDown),this.button.addEventListener("touchstart",this.onMouseDown),this.button.addEventListener("mouseup",this.onMouseUp),this.button.addEventListener("mouseleave",this.onMouseUp),this.button.addEventListener("touchend",this.onMouseUp),this.button.addEventListener("touchcancel",this.onMouseUp)}stop(){super.stop(),this.button.removeEventListener("mousedown",this.onMouseDown),this.button.removeEventListener("touchstart",this.onMouseDown),this.button.removeEventListener("mouseup",this.onMouseUp),this.button.removeEventListener("mouseleave",this.onMouseUp),this.button.removeEventListener("touchend",this.onMouseUp),this.button.removeEventListener("touchcancel",this.onMouseUp)}static readFromConfig(e,t,r){const n=window.document.createElement("button"),s=(n.innerHTML=t.name,o(n,r,t.x,t.y,t.name),new i(e,"/mirte/phone_button/"+t.name,n,t.frequency));return s.start(),s}}t.exports=i},{"../util/styleUtils":29,"./SensorPublisher.js":21}],13:[function(e,t,r){e=e("./IntervalPublisher");class i extends e{constructor(e,t,r,n,s=10){if(super(e,t,s),!(r instanceof window.HTMLVideoElement))throw new TypeError("camera argument was not of type HTMLVideoElement");if(!(n instanceof window.HTMLCanvasElement))throw new TypeError("canvas argument was not of type HTMLCanvasElement");this.camera=r,this.canvas=n,this.topic.messageType="sensor_msgs/CompressedImage"}createSnapshot(){this.canvas.getContext("2d").drawImage(this.camera,0,0,this.canvas.width,this.canvas.height);const e=this.canvas.toDataURL("image/jpeg");var t=new ROSLIB.Message({format:"jpeg",data:e.replace("data:image/jpeg;base64,","")});this.msg=t,super.createSnapshot()}start(){this.camera.srcObject||console.warn("No video source found."),super.start()}static readFromConfig(e,t){var r=document.getElementById(t.cameraId),n=document.getElementById(t.canvasId),s="mirte/phone_camera/"+t.name;const o=new i(e,s,r,n);return o.start(),o.setPublishFrequency(t.frequency),o}}t.exports=i},{"./IntervalPublisher":19}],14:[function(e,t,r){var n=e("./SensorPublisher.js");const o=e("../util/styleUtils.js")["positionElement"];class i extends n{constructor(e,t,r){if(super(e,t),!(r instanceof window.HTMLElement&&r.type&&"checkbox"===r.type))throw new TypeError("checkbox argument was not a HTML checkbox");this.topic.messageType="std_msgs/Bool",this.checkbox=r,this.change=function(e){e.target.checked?this.publishBoolMsg(!0):this.publishBoolMsg(!1)}.bind(this)}publishBoolMsg(e){e=new ROSLIB.Message({data:e});this.topic.publish(e)}start(){super.start(),this.checkbox.addEventListener("change",this.change)}stop(){super.stop(),this.checkbox.removeEventListener("change",this.change)}static readFromConfig(e,t,r){const n=window.document.createElement("input"),s=(n.type="checkbox",o(n,r,t.x,t.y,t.name),new i(e,"/mirte/phone_checkbox/"+t.name,n));return s.start(),s}}t.exports=i},{"../util/styleUtils.js":29,"./SensorPublisher.js":21}],15:[function(e,t,r){arguments[4][14][0].apply(r,arguments)},{"../util/styleUtils.js":29,"./SensorPublisher.js":21,dup:14}],16:[function(e,t,r){var n=e("./IntervalPublisher.js");const s=e("../error/PermissionDeniedError.js"),o=e("../error/NotSupportedError");class i extends n{constructor(e,t,r=90,n=0,s=10){if(super(e,t,s),"number"!=typeof r||"number"!=typeof n)throw new TypeError("Coordinates were not of type Number");if(90<r||r<-90||180<n||n<-180)throw new Error("Range of given coordinates is invalid");if(this.topic.messageType="std_msgs/Int32",this.compass=0,this.lat=r,this.lng=n,this.orientationReady=!1,this.gpsReady=!1,this.watchId=-1,!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),!window.navigator.geolocation)throw new o("Unable to create GPSPublisher, Geolocation API not supported")}start(){super.start(),window.addEventListener("deviceorientationabsolute",e=>{e.isTrusted&&this.onReadOrientation(e)},!0),this.watchId=window.navigator.geolocation.watchPosition(this.locationHandler.bind(this),e=>{throw Error("failed to watch position")})}stop(){super.stop(),window.navigator.geolocation.clearWatch(this.watchId)}requestPermission(){const t=window.document.createElement("button");t.innerHTML="Request Motion Sensor Permission",t.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(e=>{if("granted"===e)return t.remove(),!0;throw new s("No permission granted for Device Orientation")})}),window.document.body.appendChild(t)}onError(e){throw console.log("Error: "+e),Error("ERROR!")}calcDegreeToPoint(e,t){if(e===this.lat&&t===this.lng)return 0;var r=this.lat*Math.PI/180,n=this.lng*Math.PI/180,e=e*Math.PI/180,t=t*Math.PI/180,r=180/Math.PI*Math.atan2(Math.sin(n-t),Math.cos(e)*Math.tan(r)-Math.sin(e)*Math.cos(n-t));let s=Math.round(r);return s=360===(s+=180)?0:s}locationHandler(e){var{latitude:e,longitude:t}=e.coords;this.compass=this.calcDegreeToPoint(e,t),this.gpsReady=!0}onReadOrientation(e){this.alpha=Math.round(Math.abs(e.alpha-360)),this.orientationReady=!0}accountForRotation(){let e=this.compass-this.alpha;return e=e<0?360+e:e}createSnapshot(){if(!this.orientationReady||!this.gpsReady)throw Error("Orientation is not read yet!");this.compass=this.accountForRotation();var e=new ROSLIB.Message({data:this.compass});this.msg=e,super.createSnapshot()}static readFromConfig(e,t){var r="mirte/phone_gps_declination/"+t.name;const n=new i(e,r);return n.start(),n.setPublishFrequency(t.frequency),n}}t.exports=i},{"../error/NotSupportedError":8,"../error/PermissionDeniedError.js":9,"./IntervalPublisher.js":19}],17:[function(e,t,r){var n=e("./IntervalPublisher");const s=e("../error/NotSupportedError");class o extends n{constructor(e,t,r=1){if(super(e,t,r),this.topic.messageType=o.messageType,this.watchId=-1,this.position=void 0,!window.navigator.geolocation)throw new s("Unable to create GPSPublisher, Geolocation API not supported")}static get messageType(){return"sensor_msgs/NavSatFix"}start(){super.start();var e=function(e){this.position=e}.bind(this);this.watchId=window.navigator.geolocation.watchPosition(e,function(e){throw e})}stop(){super.stop(),window.navigator.geolocation.clearWatch(this.watchId)}static createNavSatMessage(e){return new ROSLIB.Message({latitude:e.latitude,longitude:e.longitude,position_covariance_type:0})}createSnapshot(){var e;this.position&&(e=this.position.coords,e=o.createNavSatMessage(e),this.msg=e,super.createSnapshot())}static readFromConfig(e,t){var r="mirte/phone_gps/"+t.name;const n=new o(e,r);return n.start(),n.setPublishFrequency(t.frequency),n}}t.exports=o},{"../error/NotSupportedError":8,"./IntervalPublisher":19}],18:[function(e,t,r){var n=e("./IntervalPublisher.js");const s=e("../error/PermissionDeniedError.js"),o=e("../util/MathUtils.js");class i extends n{constructor(e,t,r=5){super(e,t,r),this.topic.messageType="sensor_msgs/Imu",this.orientationReady=!1,this.motionReady=!1,this.alpha=0,this.beta=0,this.gamma=0,this.valpha=0,this.vbeta=0,this.vgamma=0,!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),window.addEventListener("deviceorientation",e=>{e.isTrusted&&this.onReadOrientation.bind(this)(e)}),window.DeviceMotionEvent?window.addEventListener("devicemotion",e=>{e.isTrusted&&this.onReadMotion.bind(this)(e)}):window.alert("acceleration not supported!")}requestPermission(){const t=window.document.createElement("button");t.innerHTML="Request Motion Sensor Permission",t.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(e=>{if("granted"===e)return t.remove(),!0;throw new s("No permission granted for Device Orientation")})}),window.document.body.appendChild(t)}onReadOrientation(e){this.alpha=parseFloat(e.alpha),this.beta=parseFloat(e.beta),this.gamma=parseFloat(e.gamma),this.orientationReady=!0}onReadMotion(e){var t=e.rotationRate,e=e.acceleration;this.x=e.x,this.y=e.y,this.z=e.z,this.valpha=t.alpha,this.vbeta=t.beta,this.vgamma=t.gamma,this.motionReady=!0}createSnapshot(){var e=(this.alpha+360)/360*2*Math.PI%(2*Math.PI),t=(this.beta+360)/360*2*Math.PI%(2*Math.PI),r=(this.gamma+360)/360*2*Math.PI%(2*Math.PI),t=o.quatFromEuler(t,r,e),r=new ROSLIB.Message({header:{frame_id:"world"},orientation:{x:t.x,y:t.y,z:t.z,w:t.w},orientation_covariance:[this.orientationReady?0:-1,0,0,0,0,0,0,0,0],angular_velocity:{x:this.vbeta,y:this.vgamma,z:this.valpha},angular_velocity_covariance:[this.motionReady?0:-1,0,0,0,0,0,0,0,0],linear_acceleration:{x:this.x,y:this.y,z:this.z},linear_acceleration_covariance:[this.motionReady?0:-1,0,0,0,0,0,0,0,0]});this.msg=r,super.createSnapshot()}static readFromConfig(e,t){var r="mirte/phone_imu/"+t.name;const n=new i(e,r);return n.start(),n.setPublishFrequency(t.frequency),n}}t.exports=i},{"../error/PermissionDeniedError.js":9,"../util/MathUtils.js":25,"./IntervalPublisher.js":19}],19:[function(e,t,r){var n=e("./SensorPublisher");const s=e("lodash.isequal");class o extends n{constructor(e,t,r=10){if(super(e,t),r<=0)throw new Error("Cannot construct with frequency: "+r);this.freq=r,this.msg=null,this.alReadyPublishedMsg=null}createSnapshot(){s(this.msg,this.alReadyPublishedMsg)||(this.topic.publish(this.msg),this.alReadyPublishedMsg=this.msg)}start(){super.start();var e=1e3/this.freq,t=this.createSnapshot.bind(this);this.timer=setInterval(t,e)}stop(){super.stop(),clearInterval(this.timer)}setPublishFrequency(e){if(e<=0)throw new Error("Publisher cannot publish on frequency "+e+" Hz, frequency remained "+this.freq);this.freq=e,this.started&&(this.stop(),this.start())}}t.exports=o},{"./SensorPublisher":21,"lodash.isequal":1}],20:[function(e,t,r){const n=e("../error/PermissionDeniedError.js");e=e("./IntervalPublisher.js");class s extends e{constructor(e,t,r=10){super(e,t,r),this.topic.messageType="std_msgs/Int32",this.orientationReady=!1}start(){super.start(),!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),window.addEventListener("deviceorientationabsolute",e=>{e.isTrusted&&this.onReadOrientation(e)},!0)}requestPermission(){const t=window.document.createElement("button");t.innerHTML="Request Motion Sensor Permission",t.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(e=>{if("granted"===e)return t.remove(),!0;throw new n("No permission granted for Device Orientation")})}),window.document.body.appendChild(t)}onError(e){throw console.log("Error: "+e),Error("ERROR!")}onReadOrientation(e){this.alpha=Math.round(Math.abs(e.alpha-360)),this.orientationReady=!0}createSnapshot(){if(!this.orientationReady)throw Error("Orientation is not read yet!");var e=new ROSLIB.Message({data:this.alpha});this.msg=e,super.createSnapshot()}static readFromConfig(e,t){var r="mirte/phone_magnetic_declination/"+t.name;const n=new s(e,r);return n.start(),n.setPublishFrequency(t.frequency),n}}t.exports=s},{"../error/PermissionDeniedError.js":9,"./IntervalPublisher.js":19}],21:[function(e,t,r){t.exports=class{constructor(e,t){if(!(e instanceof ROSLIB.Ros))throw new TypeError("ros argument was not of type ROSLIB.Ros");if("string"!=typeof t)throw new TypeError("topicName argument was not of type String");this.ros=e,this.topicName=t,this.topic=new ROSLIB.Topic({ros:this.ros,name:this.topicName}),this.started=!1}start(){if(this.started)throw new Error("Publisher already started");this.started=!0}stop(){if(!this.started)throw new Error("Publisher did not start yet");this.started=!1}static readFromConfig(e,t){throw Error("readFromConfig method not defined!")}}},{}],22:[function(e,t,r){var n=e("./IntervalPublisher.js");const o=e("../util/styleUtils")["positionElement"];class i extends n{constructor(e,t,r,n=8){if(super(e,t,n),!(r instanceof window.HTMLInputElement))throw new TypeError("slider argument was not of type HTMLInputElement");if("range"!==r.type)throw new TypeError("slider argument does not have type range");this.topic.messageType="std_msgs/Int32",this.slider=r}createInt32Msg(e){return new ROSLIB.Message({data:e})}createSnapshot(){var e=parseInt(this.slider.value),e=this.createInt32Msg(e);this.msg=e,super.createSnapshot()}static readFromConfig(e,t,r){const n=window.document.createElement("input"),s=(n.id=t.name,n.type="range",n.min=0,n.max=100,o(n,r,t.x,t.y,t.name),new i(e,"/mirte/phone_slider/"+t.name,n,t.frequency));return s.start(),s}}t.exports=i},{"../util/styleUtils":29,"./IntervalPublisher.js":19}],23:[function(e,t,r){const o=e("../util/styleUtils.js")["positionElement"];e=e("./SensorPublisher.js");class i extends e{constructor(e,t,r,n){if(super(e,t),this.topic.messageType="std_msgs/String",this.options=void 0===n?{}:n,this.options.onEnter=void 0===this.options.onEnter||this.options.onEnter,this.options.clearOnPublish=void 0===this.options.clearOnPublish||this.options.clearOnPublish,!(r instanceof window.HTMLInputElement))throw new TypeError("input element was not of type HTMLInputElement");if(null!==r.getAttribute("type")&&"text"!==r.getAttribute("type"))throw new TypeError('Input element has to have type attribute "text"');this.inputElement=r,this.onInput=function(){this.publishMessage()}.bind(this),this.onKeyUp=function(e){"Enter"===e.key&&this.publishMessage()}.bind(this)}publishMessage(){var e=this.createStrMsg(this.inputElement.value);this.topic.publish(e),this.options.clearOnPublish&&(this.inputElement.value="")}createStrMsg(e){return new ROSLIB.Message({data:e})}start(){super.start(),this.options.onEnter?this.inputElement.addEventListener("keyup",this.onKeyUp):this.inputElement.addEventListener("input",this.onInput)}stop(){super.stop(),this.options.onEnter?this.inputElement.removeEventListener("keyup",this.onKeyUp):this.inputElement.removeEventListener("input",this.onInput)}static readFromConfig(e,t,r){const n=window.document.createElement("input"),s=(n.type="text",o(n,r,t.x,t.y,t.name),new i(e,"/mirte/phone_text_input/"+t.name,n));return s.start(),s}}t.exports=i},{"../util/styleUtils.js":29,"./SensorPublisher.js":21}],24:[function(e,t,r){t.exports={AmbientLightPublisher:e("./AmbientLightPublisher"),ButtonPublisher:e("./ButtonPublisher"),CheckboxPublisher:e("./CheckboxPublisher"),IMUPublisher:e("./IMUPublisher"),SliderPublisher:e("./SliderPublisher"),CameraPublisher:e("./CameraPublisher"),TextPublisher:e("./TextPublisher"),GPSPublisher:e("./GPSPublisher"),MagneticDeclinationPublisher:e("./MagneticDeclinationPublisher"),GPSDeclinationPublisher:e("./GPSDeclinationPublisher")}},{"./AmbientLightPublisher":11,"./ButtonPublisher":12,"./CameraPublisher":13,"./CheckboxPublisher":15,"./GPSDeclinationPublisher":16,"./GPSPublisher":17,"./IMUPublisher":18,"./MagneticDeclinationPublisher":20,"./SliderPublisher":22,"./TextPublisher":23}],25:[function(e,t,r){t.exports={quatFromEuler:function(e,t,r){const n=Math.cos,s=Math.sin;var o=n(e/2),i=n(t/2),a=n(r/2),e=s(e/2),t=s(t/2),r=s(r/2);return{x:e*i*a+o*t*r,y:o*t*a-e*i*r,z:o*i*r+e*t*a,w:o*i*a-e*t*r}}}},{}],26:[function(e,t,r){const i=e("../sensors/ButtonPublisher"),a=e("../sensors/CheckboxPublisher"),u=e("../sensors/SliderPublisher"),c=e("../sensors/TextPublisher"),h=e("../actuators/ImageSubscriber"),l=e("../actuators/TextSubscriber");function p(t,r,n){var s=t.id;if(!(s.length<1)){if(!(t instanceof window.HTMLElement))throw new TypeError("element was not instance of HTMLElement");let e;switch(t.constructor.name){case"HTMLButtonElement":e=new i(r,"mirte/phone_button/"+s,t);break;case"HTMLInputElement":t.type&&"range"===t.type?e=new u(r,"mirte/phone_slider/"+s,t):t.type&&"text"===t.type?e=new c(r,"mirte/phone_text_input/"+s,t):t.type&&"checkbox"===t.type&&(e=new a(r,"mirte/phone_checkbox/"+s,t));break;case"HTMLCanvasElement":e=new h(r,"mirte/phone_image_output/"+s,t);break;default:e=new l(r,"mirte/phone_text_output/"+s,t)}var o=e.topic.name;if(n.has(o))throw new Error(`topic name ${o} already published`);e.start(),n.set(o,e)}}t.exports={publishChildElements:function t(r,n,s){if(s=s||new Map,!(n instanceof ROSLIB.Ros))throw new TypeError("ros argument must be of type ROSLIB.Ros");if(!(r instanceof window.HTMLElement))throw new TypeError("parentElement argument must be of type HTMLElement");if(!(s instanceof Map))throw new TypeError("map argument must be of type Map");if(0===r.children)return s;for(let e=0;e<r.childElementCount;e++){var o=r.children[e];p(o,n,s),t(o,n,s)}return s},tryPublishElement:p}},{"../actuators/ImageSubscriber":4,"../actuators/TextSubscriber":6,"../sensors/ButtonPublisher":12,"../sensors/CheckboxPublisher":15,"../sensors/SliderPublisher":22,"../sensors/TextPublisher":23}],27:[function(e,t,r){Object.assign(t.exports,e("./mirteUtil")),Object.assign(t.exports,e("./documentUtils")),Object.assign(t.exports,e("./MathUtils"))},{"./MathUtils":25,"./documentUtils":26,"./mirteUtil":28}],28:[function(e,t,r){var n=e("../sensors/GPSPublisher"),s=e("../sensors/IMUPublisher"),o=e("../sensors/MagneticDeclinationPublisher"),i=e("../sensors/GPSDeclinationPublisher"),a=e("../sensors/CameraPublisher"),u=e("../sensors/SliderPublisher"),c=e("../sensors/ButtonPublisher"),h=e("../sensors/TextPublisher"),e=e("../sensors/CheckBoxPublisher");const l={phone_imu:s.readFromConfig,phone_magnetic_declination:o.readFromConfig,phone_gps:n.readFromConfig,phone_gps_declination:i.readFromConfig,phone_camera:a.readFromConfig,phone_slider:u.readFromConfig,phone_button:c.readFromConfig,phone_text_input:h.readFromConfig,phone_checkbox:e.readFromConfig};t.exports={readSensorsFromConfig:function(e,t,r){const n=new Map;for(const i of Object.keys(l)){var s=e[i];if(s)for(const a of Object.values(s)){const u=l[i];var o=u(t,a,r);n.set(o.topic.name,o)}}return n}}},{"../sensors/ButtonPublisher":12,"../sensors/CameraPublisher":13,"../sensors/CheckBoxPublisher":14,"../sensors/GPSDeclinationPublisher":16,"../sensors/GPSPublisher":17,"../sensors/IMUPublisher":18,"../sensors/MagneticDeclinationPublisher":20,"../sensors/SliderPublisher":22,"../sensors/TextPublisher":23}],29:[function(e,t,r){t.exports={positionElement:function(e,t,r,n,s){const o=window.document.createElement("div"),i=o.style,a=(i.setProperty("position","absolute"),i.setProperty("left",r+"%"),i.setProperty("top",n+"%"),window.document.createElement("label"));a.innerHTML=s,r=window.document.createElement("br"),o.appendChild(a),o.appendChild(r),o.appendChild(e),t.appendChild(o)}}},{}]},{},[2]);