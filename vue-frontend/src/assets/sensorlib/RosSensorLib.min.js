!function s(n,o,i){function a(e,t){if(!o[e]){if(!n[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=o[e]={exports:{}},n[e][0].call(r.exports,function(t){return a(n[e][1][t]||t)},r,r.exports,s,n,o,i)}return o[e].exports}for(var u="function"==typeof require&&require,t=0;t<i.length;t++)a(i[t]);return a}({1:[function(t,Bt,kt){!function(Dt){!function(){var s="__lodash_hash_undefined__",q=1,K=2,M=9007199254740991,D="[object Arguments]",B="[object Array]",S="[object AsyncFunction]",J="[object Boolean]",Q="[object Date]",X="[object Error]",I="[object Function]",x="[object GeneratorFunction]",k="[object Map]",Y="[object Number]",T="[object Null]",A="[object Object]",j="[object Promise]",L="[object Proxy]",Z="[object RegExp]",N="[object Set]",tt="[object String]",et="[object Symbol]",C="[object Undefined]",r="[object WeakMap]",rt="[object ArrayBuffer]",z="[object DataView]",O=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,e={},t=(e["[object Float32Array]"]=e["[object Float64Array]"]=e["[object Int8Array]"]=e["[object Int16Array]"]=e["[object Int32Array]"]=e["[object Uint8Array]"]=e["[object Uint8ClampedArray]"]=e["[object Uint16Array]"]=e["[object Uint32Array]"]=!0,e[D]=e[B]=e[rt]=e[J]=e[z]=e[Q]=e[X]=e[I]=e[k]=e[Y]=e[A]=e[Z]=e[N]=e[tt]=e[r]=!1,"object"==typeof Dt&&Dt&&Dt.Object===Object&&Dt),n="object"==typeof self&&self&&self.Object===Object&&self,n=t||n||Function("return this")(),o="object"==typeof kt&&kt&&!kt.nodeType&&kt,i=o&&"object"==typeof Bt&&Bt&&!Bt.nodeType&&Bt,i=i&&i.exports===o,a=i&&t.process,o=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}(),t=o&&o.isTypedArray;function st(t){var r=-1,s=Array(t.size);return t.forEach(function(t,e){s[++r]=[e,t]}),s}function nt(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var F,U,o=Array.prototype,u=Function.prototype,c=Object.prototype,h=n["__core-js_shared__"],ot=u.toString,H=c.hasOwnProperty,it=(u=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",at=c.toString,ut=RegExp("^"+ot.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=i?n.Buffer:void 0,u=n.Symbol,ct=n.Uint8Array,ht=c.propertyIsEnumerable,lt=o.splice,l=u?u.toStringTag:void 0,pt=Object.getOwnPropertySymbols,i=h?h.isBuffer:void 0,dt=(F=Object.keys,U=Object,function(t){return F(U(t))}),o=E(n,"DataView"),p=E(n,"Map"),h=E(n,"Promise"),d=E(n,"Set"),n=E(n,"WeakMap"),m=E(Object,"create"),mt=_(o),ft=_(p),bt=_(h),gt=_(d),wt=_(n),u=u?u.prototype:void 0,vt=u?u.valueOf:void 0;function f(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function b(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function g(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function w(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new g;++e<r;)this.add(t[e])}function G(t){t=this.__data__=new b(t);this.size=t.size}function yt(t,e){var r,s,n,o=V(t),i=!o&&jt(t),a=!o&&!i&&Lt(t),u=!o&&!i&&!a&&Ut(t),c=o||i||a||u,h=c?function(t,e){for(var r=-1,s=Array(t);++r<t;)s[r]=e(r);return s}(t.length,String):[],l=h.length;for(r in t)!e&&!H.call(t,r)||c&&("length"==r||a&&("offset"==r||"parent"==r)||u&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||(s=r,(n=null==(n=l)?M:n)&&("number"==typeof s||R.test(s))&&-1<s&&s%1==0&&s<n))||h.push(r);return h}function v(t,e){for(var r=t.length;r--;)if(Tt(t[r][0],e))return r;return-1}function y(t){{if(null==t)return void 0===t?C:T;if(l&&l in Object(t)){var e=t,r=H.call(e,l),s=e[l];try{var n=!(e[l]=void 0)}catch(t){}var o=at.call(e);return n&&(r?e[l]=s:delete e[l]),o}return at.call(t)}}function Pt(t){return W(t)&&y(t)==D}function Et(t,e,r,s,n){{if(t===e)return!0;if(null==t||null==e||!W(t)&&!W(e))return t!=t&&e!=e;var o=Et,i=V(t),a=V(e),u=i?B:$(t),a=a?B:$(e),c=(u=u==D?A:u)==A,h=(a=a==D?A:a)==A,a;if((a=u==a)&&Lt(t)){if(!Lt(e))return!1;c=!(i=!0)}if(a&&!c){n=n||new G;if(i||Ut(t))return St(t,e,r,s,o,n);else{var l=t;var p=e;var d=u;var m=r;var f=s;var b=o;var g=n;switch(d){case z:if(l.byteLength!=p.byteLength||l.byteOffset!=p.byteOffset)return!1;l=l.buffer,p=p.buffer;case rt:return l.byteLength==p.byteLength&&b(new ct(l),new ct(p))?!0:!1;case J:case Q:case Y:return Tt(+l,+p);case X:return l.name==p.name&&l.message==p.message;case Z:case tt:return l==p+"";case k:var w=st;case N:var v=m&q;if(w=w||nt,l.size!=p.size&&!v)return!1;v=g.get(l);if(v)return v==p;m|=K,g.set(l,p);v=St(w(l),w(p),m,f,b,g);return g.delete(l),v;case et:if(vt)return vt.call(l)==vt.call(p)}return!1;return}}if(!(r&q)){var i=c&&H.call(t,"__wrapped__"),u=h&&H.call(e,"__wrapped__");if(i||u)return c=i?t.value():t,h=u?e.value():e,n=n||new G,o(c,h,r,s,n)}if(a){n=n||new G;var y=t,P=e,E=r,_=s,M=o,S=n,I=E&q,x=It(y),T=x.length,i=It(P).length;if(T!=i&&!I)return!1;for(var j=T;j--;){var L=x[j];if(!(I?L in P:H.call(P,L)))return!1}if((i=S.get(y))&&S.get(P))return i==P;for(var C=!0,O=(S.set(y,P),S.set(P,y),I);++j<T;){L=x[j];var R,F=y[L],U=P[L];if(!(void 0===(R=_?I?_(U,F,L,P,y,S):_(F,U,L,y,P,S):R)?F===U||M(F,U,E,_,S):R)){C=!1;break}O=O||"constructor"==L}return C&&!O&&(i=y.constructor,u=P.constructor,i!=u&&"constructor"in y&&"constructor"in P&&!("function"==typeof i&&i instanceof i&&"function"==typeof u&&u instanceof u)&&(C=!1)),S.delete(y),S.delete(P),C}return!1}}function _t(t){var e;if(Rt(t)&&(e=t,!(it&&it in e)))return(Ct(t)?ut:O).test(_(t))}function Mt(t){if(r="function"==typeof(r=(e=t)&&e.constructor)&&r.prototype||c,e!==r)return dt(t);var e,r,s,n=[];for(s in Object(t))H.call(t,s)&&"constructor"!=s&&n.push(s);return n}function St(t,e,r,s,n,o){var i=r&q,a=t.length,u=e.length;if(a!=u&&!(i&&a<u))return!1;u=o.get(t);if(u&&o.get(e))return u==e;var c=-1,h=!0,l=r&K?new w:void 0;for(o.set(t,e),o.set(e,t);++c<a;){var p,d=t[c],m=e[c];if(void 0!==(p=s?i?s(m,d,c,e,t,o):s(d,m,c,t,e,o):p)){if(p)continue;h=!1;break}if(l){if(!function(t,e){for(var r=-1,s=null==t?0:t.length;++r<s;)if(e(t[r],r,t))return 1}(e,function(t,e){return!l.has(e)&&(d===t||n(d,t,r,s,o))&&l.push(e)})){h=!1;break}}else if(d!==m&&!n(d,m,r,s,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function It(t){var e=qt,r=xt;if(e=e(t),V(t))return e;for(var s=e,n=r(t),o=-1,i=n.length,a=s.length;++o<i;)s[a+o]=n[o];return s}function P(t,e){var r,s,t=t.__data__;return("string"==(s=typeof(r=e))||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==r:null===r)?t["string"==typeof e?"string":"hash"]:t.map}function E(t,e){e=e;t=null==(t=t)?void 0:t[e];return _t(t)?t:void 0}f.prototype.clear=function(){this.__data__=m?m(null):{},this.size=0},f.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},f.prototype.get=function(t){var e,r=this.__data__;return m?(e=r[t])===s?void 0:e:H.call(r,t)?r[t]:void 0},f.prototype.has=function(t){var e=this.__data__;return m?void 0!==e[t]:H.call(e,t)},f.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=m&&void 0===e?s:e,this},b.prototype.clear=function(){this.__data__=[],this.size=0},b.prototype.delete=function(t){var e=this.__data__;return!((t=v(e,t))<0)&&(t==e.length-1?e.pop():lt.call(e,t,1),--this.size,!0)},b.prototype.get=function(t){var e=this.__data__;return(t=v(e,t))<0?void 0:e[t][1]},b.prototype.has=function(t){return-1<v(this.__data__,t)},b.prototype.set=function(t,e){var r=this.__data__,s=v(r,t);return s<0?(++this.size,r.push([t,e])):r[s][1]=e,this},g.prototype.clear=function(){this.size=0,this.__data__={hash:new f,map:new(p||b),string:new f}},g.prototype.delete=function(t){return t=P(this,t).delete(t),this.size-=t?1:0,t},g.prototype.get=function(t){return P(this,t).get(t)},g.prototype.has=function(t){return P(this,t).has(t)},g.prototype.set=function(t,e){var r=P(this,t),s=r.size;return r.set(t,e),this.size+=r.size==s?0:1,this},w.prototype.add=w.prototype.push=function(t){return this.__data__.set(t,s),this},w.prototype.has=function(t){return this.__data__.has(t)},G.prototype.clear=function(){this.__data__=new b,this.size=0},G.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},G.prototype.get=function(t){return this.__data__.get(t)},G.prototype.has=function(t){return this.__data__.has(t)},G.prototype.set=function(t,e){var r=this.__data__;if(r instanceof b){var s=r.__data__;if(!p||s.length<199)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new g(s)}return r.set(t,e),this.size=r.size,this};var xt=pt?function(e){if(null==e)return[];e=Object(e);for(var t=pt(e),r=function(t){return ht.call(e,t)},s=-1,n=null==t?0:t.length,o=0,i=[];++s<n;){var a=t[s];r(a,s,t)&&(i[o++]=a)}return i}:function(){return[]},$=y;function _(t){if(null!=t){try{return ot.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Tt(t,e){return t===e||t!=t&&e!=e}(o&&$(new o(new ArrayBuffer(1)))!=z||p&&$(new p)!=k||h&&$(h.resolve())!=j||d&&$(new d)!=N||n&&$(new n)!=r)&&($=function(t){var e=y(t),t=e==A?t.constructor:void 0,t=t?_(t):"";if(t)switch(t){case mt:return z;case ft:return k;case bt:return j;case gt:return N;case wt:return r}return e});var jt=Pt(function(){return arguments}())?Pt:function(t){return W(t)&&H.call(t,"callee")&&!ht.call(t,"callee")},V=Array.isArray;var Lt=i||function(){return!1};function Ct(t){if(Rt(t))return t=y(t),t==I||t==x||t==S||t==L}function Ot(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=M}function Rt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function W(t){return null!=t&&"object"==typeof t}var Ft,Ut=t?(Ft=t,function(t){return Ft(t)}):function(t){return W(t)&&Ot(t.length)&&!!e[y(t)]};function qt(t){return(null!=(e=t)&&Ot(e.length)&&!Ct(e)?yt:Mt)(t);var e}Bt.exports=function(t,e){return Et(t,e)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(r,t,e){!function(e){!function(){var t=this.SENSORLIB||{REVISION:"0.0.1"};Object.assign(t,r("./sensors")),Object.assign(t,r("./error")),Object.assign(t,r("./actuators")),Object.assign(t,r("./util")),e.SENSORLIB=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./actuators":7,"./error":10,"./sensors":23,"./util":26}],3:[function(t,e,r){var s=t("./Subscriber.js");const n=t("../error/NotSupportedError");class o extends s{constructor(t,e){if(super(t,e),this.topic.messageType="std_msgs/Bool",!("mediaDevices"in navigator))throw new n("Browser does not support this feature");navigator.mediaDevices.enumerateDevices().then(t=>{t=t.filter(t=>"videoinput"===t.kind);if(0===t.length)throw Error("No camera found on this device");t=t[t.length-1];navigator.mediaDevices.getUserMedia({video:{deviceId:t.deviceId,facingMode:["user","environment"],height:{ideal:1080},width:{ideal:1920}}}).then(t=>{this.track=t.getVideoTracks()[0],this.imageCapture=new ImageCapture(this.track)})})}onMessage(t){this.imageCapture.getPhotoCapabilities().then(()=>{this.track.applyConstraints({advanced:[{torch:t.data}]})})}static readFromConfig(t,e){e=e.topicPath+"/"+e.name;return new o(t,e)}}e.exports=o},{"../error/NotSupportedError":8,"./Subscriber.js":5}],4:[function(t,e,r){var s=t("./Subscriber");const a=t("../error/NotSupportedError"),n=t("../util/styleUtils")["positionElement"];class o extends s{constructor(t,e,r,s=!0){if(super(t,e),!(r instanceof window.HTMLCanvasElement))throw new TypeError("canvas argument must be of type HTMLCanvasElement");this.topic.messageType="sensor_msgs/CompressedImage",this.canvas=r,this.compressed=s,this.topic.messageType=this.getMessageType()}getMessageType(){return this.compressed?"sensor_msgs/CompressedImage":"sensor_msgs/Image"}onMessage(t){let e;if(this.compressed)e=o.createImageDataUrl(t.format,t.data);else{const s=document.createElement("canvas"),n=(s.width=t.width,s.height=t.height,s.getContext("2d"));var r=o.convertImageData(t.data,t.encoding,t.width*t.height),r=new window.ImageData(r,t.width,t.height);n.putImageData(r,0,0),e=s.toDataURL()}this.drawImage(e)}static createImageDataUrl(t,e){return"data:image/"+t+";base64,"+e}drawImage(t){const e=this.canvas,r=e.getContext("2d"),s=new window.Image;s.onload=function(){r.drawImage(s,0,0,e.width,e.height)},s.onerror=function(){throw Error("could not draw image")},s.src=t}static convertImageData(t,e,r){if("rgb8"!==e&&"rgba8"!==e)throw new a("Subscriber only supports uncompressed images in rgb8 or rgba8 format");var s="rgba8"===e;const n=window.atob(t),o=new Uint8ClampedArray(4*r);let i=0;for(let t=0;t<o.length;t++)s||t%4!=3?(o[t]=n.charCodeAt(i),i++):o[t]=255;return o}static readFromConfig(t,e,r){const s=window.document.createElement("canvas");s.style.setProperty("width","20%"),s.style.setProperty("height","20%"),n(s,r,e.x,e.y);r=e.topicPath+"/"+e.name;return new o(t,r,s)}}e.exports=o},{"../error/NotSupportedError":8,"../util/styleUtils":28,"./Subscriber":5}],5:[function(t,e,r){e.exports=class{constructor(t,e){if(!(t instanceof ROSLIB.Ros))throw new TypeError("ros argument was not of type ROSLIB.Ros");if("string"!=typeof e)throw new TypeError("topicName argument was not of type String");this.ros=t,this.topicName=e,this.topic=new ROSLIB.Topic({ros:this.ros,name:this.topicName}),this.started=!1,this.onMessage=this.onMessage.bind(this)}onMessage(t){throw Error("onMessage method not defined!")}start(){if(this.started)throw new Error("Subscriber already started");this.topic.subscribe(this.onMessage),this.started=!0}stop(){if(!this.started)throw new Error("Subscriber did not start yet");this.topic.unsubscribe(this.onMessage),this.started=!1}}},{}],6:[function(t,e,r){const n=t("../util/styleUtils.js")["positionElement"];t=t("./Subscriber.js");class o extends t{constructor(t,e,r){if(super(t,e),!(r instanceof window.HTMLElement))throw new TypeError("HTMLElement argument was not of type HTMLElement");this.topic.messageType="std_msgs/String",this.HTMLElement=r}onMessage(t){this.HTMLElement.innerHTML=t.data}static readFromConfig(t,e,r){const s=window.document.createElement("div");s.style.setProperty("width","20%"),n(s,r,e.x,e.y);r=e.topicPath+"/"+e.name;return new o(t,r,s)}}e.exports=o},{"../util/styleUtils.js":28,"./Subscriber.js":5}],7:[function(t,e,r){e.exports={FlashlightSubscriber:t("./FlashlightSubscriber"),ImageSubscriber:t("./ImageSubscriber"),TextSubscriber:t("./TextSubscriber")}},{"./FlashlightSubscriber":3,"./ImageSubscriber":4,"./TextSubscriber":6}],8:[function(t,e,r){class s extends Error{constructor(t){super(t),this.name="NotSupportedError"}}e.exports=s},{}],9:[function(t,e,r){class s extends Error{constructor(t){super(t),this.name="PermissionDeniedError"}}e.exports=s},{}],10:[function(t,e,r){e.exports={NotSupportedError:t("./NotSupportedError"),PermissionDeniedError:t("./PermissionDeniedError")}},{"./NotSupportedError":8,"./PermissionDeniedError":9}],11:[function(t,e,r){var s=t("./IntervalPublisher.js");const n=t("../error/NotSupportedError");class o extends s{constructor(t,e,r=1){if(!window.AmbientLightSensor)throw new n("Unable to create AmbientLightSensor, AmbientLight API not supported");super(t,e,r),this.topic.messageType="std_msgs/Int32",this.sensor=new AmbientLightSensor}start(){this.sensor.addEventListener("reading",t=>{this.light=this.sensor.illuminance}),this.sensor.start(),super.start()}stop(){super.stop(),this.sensor.stop(),this.sensor.removeEventListener("reading",t=>{this.light=this.sensor.illuminance})}createSnapshot(){var t=new ROSLIB.Message({data:this.light});this.msg=t,super.createSnapshot()}}e.exports=o},{"../error/NotSupportedError":8,"./IntervalPublisher.js":19}],12:[function(t,e,r){var s=t("./SensorPublisher.js");const o=t("../util/styleUtils")["positionElement"];class i extends s{constructor(t,e,r){if(super(t,e),!(r instanceof window.HTMLButtonElement))throw new TypeError("button argument was not of type HTMLButtonElement");this.topic.messageType="std_msgs/Bool",this.button=r;let s=!1;this.onMouseDown=function(t){t.preventDefault(),s||(s=!0,t=new ROSLIB.Message({data:!0}),this.topic.publish(t))}.bind(this),this.onMouseUp=function(t){t.preventDefault(),s&&(s=!1,t=new ROSLIB.Message({data:!1}),this.topic.publish(t))}.bind(this)}start(){this.button.addEventListener("mousedown",this.onMouseDown),this.button.addEventListener("touchstart",this.onMouseDown),this.button.addEventListener("mouseup",this.onMouseUp),this.button.addEventListener("mouseleave",this.onMouseUp),this.button.addEventListener("touchend",this.onMouseUp),this.button.addEventListener("touchcancel",this.onMouseUp),super.start()}stop(){super.stop(),this.button.removeEventListener("mousedown",this.onMouseDown),this.button.removeEventListener("touchstart",this.onMouseDown),this.button.removeEventListener("mouseup",this.onMouseUp),this.button.removeEventListener("mouseleave",this.onMouseUp),this.button.removeEventListener("touchend",this.onMouseUp),this.button.removeEventListener("touchcancel",this.onMouseUp)}static readFromConfig(t,e,r){const s=window.document.createElement("button"),n=(s.innerHTML=e.name,o(s,r,e.x,e.y,e.name),new i(t,e.topicPath+"/"+e.name,s,e.frequency));return n.start(),n}}e.exports=i},{"../util/styleUtils":28,"./SensorPublisher.js":20}],13:[function(t,e,r){t=t("./IntervalPublisher");class i extends t{constructor(t,e,r,s,n=10){if(super(t,e,n),!(r instanceof window.HTMLVideoElement))throw new TypeError("camera argument was not of type HTMLVideoElement");if(!(s instanceof window.HTMLCanvasElement))throw new TypeError("canvas argument was not of type HTMLCanvasElement");this.topicName=e+"/compressed",this.topic.name=this.topicName,this.camera=r,this.canvas=s,this.topic.messageType="sensor_msgs/CompressedImage"}start(){if(!this.camera.srcObject)throw new Error("No video source found.");super.start()}createSnapshot(){this.canvas.getContext("2d").drawImage(this.camera,0,0,this.canvas.width,this.canvas.height);const t=this.canvas.toDataURL("image/jpeg");var e=new ROSLIB.Message({format:"jpeg",data:t.replace("data:image/jpeg;base64,","")});this.msg=e,super.createSnapshot()}static readFromConfig(t,e){e.cameraId=e.cameraId||"camera",e.canvasId=e.canvasId||"canvas";var r=document.getElementById(e.cameraId),s=document.getElementById(e.canvasId),n=e.topicPath+"/"+e.name;const o=new i(t,n,r,s);return o.start(),o.setPublishFrequency(e.frequency),o}}e.exports=i},{"./IntervalPublisher":19}],14:[function(t,e,r){var s=t("./SensorPublisher.js");const o=t("../util/styleUtils.js")["positionElement"];class i extends s{constructor(t,e,r){if(super(t,e),!(r instanceof window.HTMLElement&&r.type&&"checkbox"===r.type))throw new TypeError("checkbox argument was not a HTML checkbox");this.topic.messageType="std_msgs/Bool",this.checkbox=r,this.change=function(t){t.target.checked?this.publishBoolMsg(!0):this.publishBoolMsg(!1)}.bind(this)}start(){this.checkbox.addEventListener("change",this.change),super.start()}stop(){super.stop(),this.checkbox.removeEventListener("change",this.change)}publishBoolMsg(t){t=new ROSLIB.Message({data:t});this.topic.publish(t)}static readFromConfig(t,e,r){const s=window.document.createElement("input"),n=(s.type="checkbox",o(s,r,e.x,e.y,e.name),new i(t,e.topicPath+"/"+e.name,s));return n.start(),n}}e.exports=i},{"../util/styleUtils.js":28,"./SensorPublisher.js":20}],15:[function(t,e,r){const s=t("../error/PermissionDeniedError.js");t=t("./IntervalPublisher.js");class n extends t{constructor(t,e,r=10){super(t,e,r),this.topic.messageType="std_msgs/Int32",this.orientationReady=!1}start(){!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),window.addEventListener("deviceorientationabsolute",t=>{t.isTrusted&&this.onReadOrientation(t)},!0),super.start()}stop(){super.stop(),window.removeEventListener("deviceorientationabsolute",t=>{t.isTrusted&&this.onReadOrientation(t)},!0)}requestPermission(){const e=window.document.createElement("button");e.innerHTML="Request Motion Sensor Permission",e.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(t=>{if("granted"===t)return e.remove(),!0;throw new s("No permission granted for Device Orientation")})}),window.document.body.appendChild(e)}onReadOrientation(t){this.alpha=Math.round(Math.abs(t.alpha-360)),this.orientationReady=!0}createSnapshot(){if(!this.orientationReady)throw Error("Orientation is not read yet!");var t=new ROSLIB.Message({data:this.alpha});this.msg=t,super.createSnapshot()}static readFromConfig(t,e){var r=e.topicPath+"/"+e.name;const s=new n(t,r);return s.start(),s.setPublishFrequency(e.frequency),s}}e.exports=n},{"../error/PermissionDeniedError.js":9,"./IntervalPublisher.js":19}],16:[function(t,e,r){var s=t("./IntervalPublisher.js");const n=t("../error/PermissionDeniedError.js"),o=t("../error/NotSupportedError");class i extends s{constructor(t,e,r=90,s=0,n=10){if(super(t,e,n),"number"!=typeof r||"number"!=typeof s)throw new TypeError("Coordinates were not of type Number");if(90<r||r<-90||180<s||s<-180)throw new Error("Range of given coordinates is invalid");if(this.topic.messageType="std_msgs/Int32",this.compass=0,this.lat=r,this.lng=s,this.orientationReady=!1,this.gpsReady=!1,this.watchId=-1,!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),!window.navigator.geolocation)throw new o("Unable to create CoordinateCompassPublisher, Geolocation API not supported")}start(){window.addEventListener("deviceorientationabsolute",t=>{t.isTrusted&&this.onReadOrientation(t)},!0),this.watchId=window.navigator.geolocation.watchPosition(this.locationHandler.bind(this),t=>{throw Error("failed to watch position")}),super.start()}stop(){super.stop(),window.navigator.geolocation.clearWatch(this.watchId)}requestPermission(){const e=window.document.createElement("button");e.innerHTML="Request Motion Sensor Permission",e.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(t=>{if("granted"===t)return e.remove(),!0;throw new n("No permission granted for Device Orientation")})}),window.document.body.appendChild(e)}calcDegreeToPoint(t,e){if(t===this.lat&&e===this.lng)return 0;var r=this.lat*Math.PI/180,s=this.lng*Math.PI/180,t=t*Math.PI/180,e=e*Math.PI/180,r=180/Math.PI*Math.atan2(Math.sin(s-e),Math.cos(t)*Math.tan(r)-Math.sin(t)*Math.cos(s-e));let n=Math.round(r);return n=360===(n+=180)?0:n}locationHandler(t){var{latitude:t,longitude:e}=t.coords;this.compass=this.calcDegreeToPoint(t,e),this.gpsReady=!0}onReadOrientation(t){this.alpha=Math.round(Math.abs(t.alpha-360)),this.orientationReady=!0}accountForRotation(){let t=this.compass-this.alpha;return t=t<0?360+t:t}createSnapshot(){if(!this.orientationReady||!this.gpsReady)throw Error("Orientation is not read yet!");this.compass=this.accountForRotation();var t=new ROSLIB.Message({data:this.compass});this.msg=t,super.createSnapshot()}static readFromConfig(t,e){var r=e.topicPath+"/"+e.name;const s=new i(t,r);return s.start(),s.setPublishFrequency(e.frequency),s}}e.exports=i},{"../error/NotSupportedError":8,"../error/PermissionDeniedError.js":9,"./IntervalPublisher.js":19}],17:[function(t,e,r){var s=t("./IntervalPublisher");const n=t("../error/NotSupportedError");class o extends s{constructor(t,e,r=1){if(super(t,e,r),this.topic.messageType=o.messageType,this.watchId=-1,this.position=void 0,!window.navigator.geolocation)throw new n("Unable to create GPSPublisher, Geolocation API not supported")}static get messageType(){return"sensor_msgs/NavSatFix"}start(){var t=function(t){this.position=t}.bind(this);this.watchId=window.navigator.geolocation.watchPosition(t,function(t){throw t}),super.start()}stop(){super.stop(),window.navigator.geolocation.clearWatch(this.watchId)}static createNavSatMessage(t){return new ROSLIB.Message({latitude:t.latitude,longitude:t.longitude,position_covariance_type:0})}createSnapshot(){var t;this.position&&(t=this.position.coords,t=o.createNavSatMessage(t),this.msg=t,super.createSnapshot())}static readFromConfig(t,e){var r=e.topicPath+"/"+e.name;const s=new o(t,r);return s.start(),s.setPublishFrequency(e.frequency),s}}e.exports=o},{"../error/NotSupportedError":8,"./IntervalPublisher":19}],18:[function(t,e,r){var s=t("./IntervalPublisher.js");const n=t("../error/PermissionDeniedError.js"),o=t("../util/MathUtils.js");class i extends s{constructor(t,e,r=5){super(t,e,r),this.topic.messageType="sensor_msgs/Imu",this.orientationReady=!1,this.motionReady=!1,this.alpha=0,this.beta=0,this.gamma=0,this.valpha=0,this.vbeta=0,this.vgamma=0,!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission()}start(){window.addEventListener("deviceorientation",t=>{t.isTrusted&&this.onReadOrientation.bind(this)(t)}),window.DeviceMotionEvent?window.addEventListener("devicemotion",t=>{t.isTrusted&&this.onReadMotion.bind(this)(t)}):window.alert("acceleration not supported!"),super.start()}stop(){super.stop(),window.removeEventListener("deviceorientation",t=>{t.isTrusted&&this.onReadOrientation.bind(this)(t)}),window.removeEventListener("devicemotion",t=>{t.isTrusted&&this.onReadMotion.bind(this)(t)})}requestPermission(){const e=window.document.createElement("button");e.innerHTML="Request Motion Sensor Permission",e.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(t=>{if("granted"===t)return e.remove(),!0;throw new n("No permission granted for Device Orientation")})}),window.document.body.appendChild(e)}onReadOrientation(t){this.alpha=parseFloat(t.alpha),this.beta=parseFloat(t.beta),this.gamma=parseFloat(t.gamma),this.orientationReady=!0}onReadMotion(t){var e=t.rotationRate,t=t.acceleration;this.x=t.x,this.y=t.y,this.z=t.z,this.valpha=e.alpha,this.vbeta=e.beta,this.vgamma=e.gamma,this.motionReady=!0}createSnapshot(){var t=(this.alpha+360)/360*2*Math.PI%(2*Math.PI),e=(this.beta+360)/360*2*Math.PI%(2*Math.PI),r=(this.gamma+360)/360*2*Math.PI%(2*Math.PI),e=o.quatFromEuler(e,r,t),r=new ROSLIB.Message({header:{frame_id:"world"},orientation:{x:e.x,y:e.y,z:e.z,w:e.w},orientation_covariance:[this.orientationReady?0:-1,0,0,0,0,0,0,0,0],angular_velocity:{x:this.vbeta,y:this.vgamma,z:this.valpha},angular_velocity_covariance:[this.motionReady?0:-1,0,0,0,0,0,0,0,0],linear_acceleration:{x:this.x,y:this.y,z:this.z},linear_acceleration_covariance:[this.motionReady?0:-1,0,0,0,0,0,0,0,0]});this.msg=r,super.createSnapshot()}static readFromConfig(t,e){var r=e.topicPath+"/"+e.name;const s=new i(t,r);return s.start(),s.setPublishFrequency(e.frequency),s}}e.exports=i},{"../error/PermissionDeniedError.js":9,"../util/MathUtils.js":24,"./IntervalPublisher.js":19}],19:[function(t,e,r){var s=t("./SensorPublisher");const n=t("lodash.isequal");class o extends s{constructor(t,e,r=10){if(super(t,e),r<=0)throw new Error("Cannot construct with frequency: "+r);this.freq=r,this.msg=null,this.alReadyPublishedMsg=null}start(){var t=1e3/this.freq,e=this.createSnapshot.bind(this);this.timer=setInterval(e,t),super.start()}stop(){super.stop(),clearInterval(this.timer)}createSnapshot(){if(!this.msg)throw Error("createSnapshot has not been implemented correctly");n(this.msg,this.alReadyPublishedMsg)||(this.topic.publish(this.msg),this.alReadyPublishedMsg=this.msg)}setPublishFrequency(t){if(t<=0)throw new Error("Publisher cannot publish on frequency "+t+" Hz, frequency remained "+this.freq);this.freq=t,this.started&&(this.stop(),this.start())}}e.exports=o},{"./SensorPublisher":20,"lodash.isequal":1}],20:[function(t,e,r){e.exports=class{constructor(t,e){if(!(t instanceof ROSLIB.Ros))throw new TypeError("ros argument was not of type ROSLIB.Ros");if("string"!=typeof e)throw new TypeError("topicName argument was not of type String");if(/\s/.test(e))throw new Error("topicName argument has space");this.ros=t,this.topicName=e,this.topic=new ROSLIB.Topic({ros:this.ros,name:this.topicName}),this.started=!1}start(){if(this.started)throw new Error("Publisher already started");this.started=!0}stop(){if(!this.started)throw new Error("Publisher did not start yet");this.started=!1}static readFromConfig(t,e){throw Error("readFromConfig method not defined!")}}},{}],21:[function(t,e,r){var s=t("./IntervalPublisher.js");const o=t("../util/styleUtils")["positionElement"];class i extends s{constructor(t,e,r,s=8){if(super(t,e,s),!(r instanceof window.HTMLInputElement))throw new TypeError("slider argument was not of type HTMLInputElement");if("range"!==r.type)throw new TypeError("slider argument does not have type range");this.topic.messageType="std_msgs/Int32",this.slider=r}createSnapshot(){var t=parseInt(this.slider.value),t=new ROSLIB.Message({data:t});this.msg=t,super.createSnapshot()}static readFromConfig(t,e,r){const s=window.document.createElement("input");s.id=e.name,s.type="range",s.min=0,s.max=100,o(s,r,e.x,e.y,e.name);r=e.topicPath+"/"+e.name;const n=new i(t,r,s,e.frequency);return n.start(),n}}e.exports=i},{"../util/styleUtils":28,"./IntervalPublisher.js":19}],22:[function(t,e,r){const o=t("../util/styleUtils.js")["positionElement"];t=t("./SensorPublisher.js");class i extends t{constructor(t,e,r,s){if(super(t,e),this.topic.messageType="std_msgs/String",this.options=void 0===s?{}:s,this.options.onEnter=void 0===this.options.onEnter||this.options.onEnter,this.options.clearOnPublish=void 0===this.options.clearOnPublish||this.options.clearOnPublish,!(r instanceof window.HTMLInputElement))throw new TypeError("input element was not of type HTMLInputElement");if(null!==r.getAttribute("type")&&"text"!==r.getAttribute("type"))throw new TypeError('Input element has to have type attribute "text"');this.inputElement=r,this.onInput=function(){this.publishMessage()}.bind(this),this.onKeyUp=function(t){"Enter"===t.key&&this.publishMessage()}.bind(this)}createStrMsg(t){return new ROSLIB.Message({data:t})}start(){this.options.onEnter?this.inputElement.addEventListener("keyup",this.onKeyUp):this.inputElement.addEventListener("input",this.onInput),super.start()}stop(){super.stop(),this.options.onEnter?this.inputElement.removeEventListener("keyup",this.onKeyUp):this.inputElement.removeEventListener("input",this.onInput)}publishMessage(){var t=new ROSLIB.Message({data:this.inputElement.value});this.topic.publish(t),this.options.clearOnPublish&&(this.inputElement.value="")}static readFromConfig(t,e,r){const s=window.document.createElement("input");s.type="text",o(s,r,e.x,e.y,e.name);r=e.topicPath+"/"+e.name;const n=new i(t,r,s);return n.start(),n}}e.exports=i},{"../util/styleUtils.js":28,"./SensorPublisher.js":20}],23:[function(t,e,r){e.exports={AmbientLightPublisher:t("./AmbientLightPublisher"),ButtonPublisher:t("./ButtonPublisher"),CameraPublisher:t("./CameraPublisher"),CheckboxPublisher:t("./CheckboxPublisher"),CompassPublisher:t("./CompassPublisher"),CoordinateCompassPublisher:t("./CoordinateCompassPublisher"),GPSPublisher:t("./GPSPublisher"),IMUPublisher:t("./IMUPublisher"),SliderPublisher:t("./SliderPublisher"),TextPublisher:t("./TextPublisher")}},{"./AmbientLightPublisher":11,"./ButtonPublisher":12,"./CameraPublisher":13,"./CheckboxPublisher":14,"./CompassPublisher":15,"./CoordinateCompassPublisher":16,"./GPSPublisher":17,"./IMUPublisher":18,"./SliderPublisher":21,"./TextPublisher":22}],24:[function(t,e,r){e.exports={quatFromEuler:function(t,e,r){const s=Math.cos,n=Math.sin;var o=parseFloat(s(.5*r)),r=parseFloat(n(.5*r)),i=parseFloat(s(.5*e)),e=parseFloat(n(.5*e)),a=parseFloat(s(.5*t)),t=parseFloat(n(.5*t));const u={x:0,y:0,z:0,w:0};return u.w=a*i*o+t*e*r,u.x=t*i*o-a*e*r,u.y=a*e*o+t*i*r,u.z=a*i*r-t*e*o,u}}},{}],25:[function(t,e,r){const i=t("../sensors/ButtonPublisher"),a=t("../sensors/CheckboxPublisher"),u=t("../actuators/ImageSubscriber"),c=t("../sensors/SliderPublisher"),h=t("../sensors/TextPublisher"),l=t("../actuators/TextSubscriber");function p(e,r,s){var n=e.id;if(!(n.length<1)){if(!(e instanceof window.HTMLElement))throw new TypeError("element was not instance of HTMLElement");let t;switch(e.constructor.name){case"HTMLButtonElement":t=new i(r,"mirte/phone_button/"+n,e);break;case"HTMLInputElement":e.type&&"range"===e.type?t=new c(r,"mirte/phone_slider/"+n,e):e.type&&"text"===e.type?t=new h(r,"mirte/phone_text_input/"+n,e):e.type&&"checkbox"===e.type&&(t=new a(r,"mirte/phone_checkbox/"+n,e));break;case"HTMLCanvasElement":t=new u(r,"mirte/phone_image_output/"+n,e);break;default:t=new l(r,"mirte/phone_text_output/"+n,e)}var o=t.topic.name;if(s.has(o))throw new Error(`topic name ${o} already published`);t.start(),s.set(o,t)}}e.exports={publishChildElements:function e(r,s,n){if(n=n||new Map,!(s instanceof ROSLIB.Ros))throw new TypeError("ros argument must be of type ROSLIB.Ros");if(!(r instanceof window.HTMLElement))throw new TypeError("parentElement argument must be of type HTMLElement");if(!(n instanceof Map))throw new TypeError("map argument must be of type Map");if(0===r.children)return n;for(let t=0;t<r.childElementCount;t++){var o=r.children[t];p(o,s,n),e(o,s,n)}return n},tryPublishElement:p}},{"../actuators/ImageSubscriber":4,"../actuators/TextSubscriber":6,"../sensors/ButtonPublisher":12,"../sensors/CheckboxPublisher":14,"../sensors/SliderPublisher":21,"../sensors/TextPublisher":22}],26:[function(t,e,r){Object.assign(e.exports,t("./mirteUtil")),Object.assign(e.exports,t("./documentUtils")),Object.assign(e.exports,t("./MathUtils"))},{"./MathUtils":24,"./documentUtils":25,"./mirteUtil":27}],27:[function(t,e,r){var s=t("../sensors/CameraPublisher"),n=t("../sensors/CoordinateCompassPublisher"),o=t("../sensors/GPSPublisher"),i=t("../sensors/IMUPublisher"),a=t("../sensors/CompassPublisher"),u=t("../sensors/ButtonPublisher"),c=t("../sensors/CheckboxPublisher"),h=t("../sensors/SliderPublisher"),l=t("../sensors/TextPublisher"),p=t("../actuators/FlashlightSubscriber"),d=t("../actuators/ImageSubscriber"),t=t("../actuators/TextSubscriber");const m={phone_button:u.readFromConfig,phone_camera:s.readFromConfig,phone_checkbox:c.readFromConfig,phone_compass:a.readFromConfig,phone_flashlight:p.readFromConfig,phone_gps:o.readFromConfig,phone_image_output:d.readFromConfig,phone_imu:i.readFromConfig,phone_coordinate_compass:n.readFromConfig,phone_slider:h.readFromConfig,phone_text_input:l.readFromConfig,phone_text_output:t.readFromConfig};e.exports={readSensorsFromConfig:function(t,e,r){const s=new Map;for(const i of Object.keys(m)){var n=t[i];if(n)for(const a of Object.values(n)){a.topicPath="/mirte/"+i;const u=m[i];var o=u(e,a,r);s.set(o.topic.name,o)}}return s}}},{"../actuators/FlashlightSubscriber":3,"../actuators/ImageSubscriber":4,"../actuators/TextSubscriber":6,"../sensors/ButtonPublisher":12,"../sensors/CameraPublisher":13,"../sensors/CheckboxPublisher":14,"../sensors/CompassPublisher":15,"../sensors/CoordinateCompassPublisher":16,"../sensors/GPSPublisher":17,"../sensors/IMUPublisher":18,"../sensors/SliderPublisher":21,"../sensors/TextPublisher":22}],28:[function(t,e,r){e.exports={positionElement:function(t,e,r,s){const n=t.style;n.setProperty("position","absolute"),n.setProperty("left",r+"%"),n.setProperty("top",s+"%"),e.appendChild(t)}}},{}]},{},[2]);