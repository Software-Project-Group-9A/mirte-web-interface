!function n(o,s,i){function a(e,t){if(!s[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=s[e]={exports:{}},o[e][0].call(r.exports,function(t){return a(o[e][1][t]||t)},r,r.exports,n,o,s,i)}return s[e].exports}for(var u="function"==typeof require&&require,t=0;t<i.length;t++)a(i[t]);return a}({1:[function(t,Ut,Nt){!function(Bt){!function(){var n="__lodash_hash_undefined__",F=1,K=2,M=9007199254740991,B="[object Arguments]",U="[object Array]",S="[object AsyncFunction]",J="[object Boolean]",Q="[object Date]",X="[object Error]",I="[object Function]",j="[object GeneratorFunction]",N="[object Map]",Y="[object Number]",T="[object Null]",z="[object Object]",x="[object Promise]",O="[object Proxy]",Z="[object RegExp]",A="[object Set]",tt="[object String]",et="[object Symbol]",L="[object Undefined]",r="[object WeakMap]",rt="[object ArrayBuffer]",H="[object DataView]",R=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,e={},t=(e["[object Float32Array]"]=e["[object Float64Array]"]=e["[object Int8Array]"]=e["[object Int16Array]"]=e["[object Int32Array]"]=e["[object Uint8Array]"]=e["[object Uint8ClampedArray]"]=e["[object Uint16Array]"]=e["[object Uint32Array]"]=!0,e[B]=e[U]=e[rt]=e[J]=e[H]=e[Q]=e[X]=e[I]=e[N]=e[Y]=e[z]=e[Z]=e[A]=e[tt]=e[r]=!1,"object"==typeof Bt&&Bt&&Bt.Object===Object&&Bt),o="object"==typeof self&&self&&self.Object===Object&&self,o=t||o||Function("return this")(),s="object"==typeof Nt&&Nt&&!Nt.nodeType&&Nt,i=s&&"object"==typeof Ut&&Ut&&!Ut.nodeType&&Ut,i=i&&i.exports===s,a=i&&t.process,s=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}(),t=s&&s.isTypedArray;function nt(t){var r=-1,n=Array(t.size);return t.forEach(function(t,e){n[++r]=[e,t]}),n}function ot(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var C,q,s=Array.prototype,u=Function.prototype,c=Object.prototype,h=o["__core-js_shared__"],st=u.toString,k=c.hasOwnProperty,it=(u=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",at=c.toString,ut=RegExp("^"+st.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=i?o.Buffer:void 0,u=o.Symbol,ct=o.Uint8Array,ht=c.propertyIsEnumerable,lt=s.splice,l=u?u.toStringTag:void 0,pt=Object.getOwnPropertySymbols,i=h?h.isBuffer:void 0,dt=(C=Object.keys,q=Object,function(t){return C(q(t))}),s=E(o,"DataView"),p=E(o,"Map"),h=E(o,"Promise"),d=E(o,"Set"),o=E(o,"WeakMap"),f=E(Object,"create"),ft=P(s),mt=P(p),gt=P(h),bt=P(d),wt=P(o),u=u?u.prototype:void 0,vt=u?u.valueOf:void 0;function m(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function g(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function w(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new b;++e<r;)this.add(t[e])}function G(t){t=this.__data__=new g(t);this.size=t.size}function yt(t,e){var r,n,o,s=V(t),i=!s&&xt(t),a=!s&&!i&&Ot(t),u=!s&&!i&&!a&&qt(t),c=s||i||a||u,h=c?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],l=h.length;for(r in t)!e&&!k.call(t,r)||c&&("length"==r||a&&("offset"==r||"parent"==r)||u&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||(n=r,(o=null==(o=l)?M:o)&&("number"==typeof n||D.test(n))&&-1<n&&n%1==0&&n<o))||h.push(r);return h}function v(t,e){for(var r=t.length;r--;)if(Tt(t[r][0],e))return r;return-1}function y(t){{if(null==t)return void 0===t?L:T;if(l&&l in Object(t)){var e=t,r=k.call(e,l),n=e[l];try{var o=!(e[l]=void 0)}catch(t){}var s=at.call(e);return o&&(r?e[l]=n:delete e[l]),s}return at.call(t)}}function _t(t){return W(t)&&y(t)==B}function Et(t,e,r,n,o){{if(t===e)return!0;if(null==t||null==e||!W(t)&&!W(e))return t!=t&&e!=e;var s=Et,i=V(t),a=V(e),u=i?U:$(t),a=a?U:$(e),c=(u=u==B?z:u)==z,h=(a=a==B?z:a)==z,a;if((a=u==a)&&Ot(t)){if(!Ot(e))return!1;c=!(i=!0)}if(a&&!c){o=o||new G;if(i||qt(t))return St(t,e,r,n,s,o);else{var l=t;var p=e;var d=u;var f=r;var m=n;var g=s;var b=o;switch(d){case H:if(l.byteLength!=p.byteLength||l.byteOffset!=p.byteOffset)return!1;l=l.buffer,p=p.buffer;case rt:return l.byteLength==p.byteLength&&g(new ct(l),new ct(p))?!0:!1;case J:case Q:case Y:return Tt(+l,+p);case X:return l.name==p.name&&l.message==p.message;case Z:case tt:return l==p+"";case N:var w=nt;case A:var v=f&F;if(w=w||ot,l.size!=p.size&&!v)return!1;v=b.get(l);if(v)return v==p;f|=K,b.set(l,p);v=St(w(l),w(p),f,m,g,b);return b.delete(l),v;case et:if(vt)return vt.call(l)==vt.call(p)}return!1;return}}if(!(r&F)){var i=c&&k.call(t,"__wrapped__"),u=h&&k.call(e,"__wrapped__");if(i||u)return c=i?t.value():t,h=u?e.value():e,o=o||new G,s(c,h,r,n,o)}if(a){o=o||new G;var y=t,_=e,E=r,P=n,M=s,S=o,I=E&F,j=It(y),T=j.length,i=It(_).length;if(T!=i&&!I)return!1;for(var x=T;x--;){var O=j[x];if(!(I?O in _:k.call(_,O)))return!1}if((i=S.get(y))&&S.get(_))return i==_;for(var L=!0,R=(S.set(y,_),S.set(_,y),I);++x<T;){O=j[x];var D,C=y[O],q=_[O];if(!(void 0===(D=P?I?P(q,C,O,_,y,S):P(C,q,O,y,_,S):D)?C===q||M(C,q,E,P,S):D)){L=!1;break}R=R||"constructor"==O}return L&&!R&&(i=y.constructor,u=_.constructor,i!=u&&"constructor"in y&&"constructor"in _&&!("function"==typeof i&&i instanceof i&&"function"==typeof u&&u instanceof u)&&(L=!1)),S.delete(y),S.delete(_),L}return!1}}function Pt(t){var e;if(Dt(t)&&(e=t,!(it&&it in e)))return(Lt(t)?ut:R).test(P(t))}function Mt(t){if(r="function"==typeof(r=(e=t)&&e.constructor)&&r.prototype||c,e!==r)return dt(t);var e,r,n,o=[];for(n in Object(t))k.call(t,n)&&"constructor"!=n&&o.push(n);return o}function St(t,e,r,n,o,s){var i=r&F,a=t.length,u=e.length;if(a!=u&&!(i&&a<u))return!1;u=s.get(t);if(u&&s.get(e))return u==e;var c=-1,h=!0,l=r&K?new w:void 0;for(s.set(t,e),s.set(e,t);++c<a;){var p,d=t[c],f=e[c];if(void 0!==(p=n?i?n(f,d,c,e,t,s):n(d,f,c,t,e,s):p)){if(p)continue;h=!1;break}if(l){if(!function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return 1}(e,function(t,e){return!l.has(e)&&(d===t||o(d,t,r,n,s))&&l.push(e)})){h=!1;break}}else if(d!==f&&!o(d,f,r,n,s)){h=!1;break}}return s.delete(t),s.delete(e),h}function It(t){var e=Ft,r=jt;if(e=e(t),V(t))return e;for(var n=e,o=r(t),s=-1,i=o.length,a=n.length;++s<i;)n[a+s]=o[s];return n}function _(t,e){var r,n,t=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?t["string"==typeof e?"string":"hash"]:t.map}function E(t,e){e=e;t=null==(t=t)?void 0:t[e];return Pt(t)?t:void 0}m.prototype.clear=function(){this.__data__=f?f(null):{},this.size=0},m.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},m.prototype.get=function(t){var e,r=this.__data__;return f?(e=r[t])===n?void 0:e:k.call(r,t)?r[t]:void 0},m.prototype.has=function(t){var e=this.__data__;return f?void 0!==e[t]:k.call(e,t)},m.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=f&&void 0===e?n:e,this},g.prototype.clear=function(){this.__data__=[],this.size=0},g.prototype.delete=function(t){var e=this.__data__;return!((t=v(e,t))<0)&&(t==e.length-1?e.pop():lt.call(e,t,1),--this.size,!0)},g.prototype.get=function(t){var e=this.__data__;return(t=v(e,t))<0?void 0:e[t][1]},g.prototype.has=function(t){return-1<v(this.__data__,t)},g.prototype.set=function(t,e){var r=this.__data__,n=v(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},b.prototype.clear=function(){this.size=0,this.__data__={hash:new m,map:new(p||g),string:new m}},b.prototype.delete=function(t){return t=_(this,t).delete(t),this.size-=t?1:0,t},b.prototype.get=function(t){return _(this,t).get(t)},b.prototype.has=function(t){return _(this,t).has(t)},b.prototype.set=function(t,e){var r=_(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},w.prototype.add=w.prototype.push=function(t){return this.__data__.set(t,n),this},w.prototype.has=function(t){return this.__data__.has(t)},G.prototype.clear=function(){this.__data__=new g,this.size=0},G.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},G.prototype.get=function(t){return this.__data__.get(t)},G.prototype.has=function(t){return this.__data__.has(t)},G.prototype.set=function(t,e){var r=this.__data__;if(r instanceof g){var n=r.__data__;if(!p||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new b(n)}return r.set(t,e),this.size=r.size,this};var jt=pt?function(e){if(null==e)return[];e=Object(e);for(var t=pt(e),r=function(t){return ht.call(e,t)},n=-1,o=null==t?0:t.length,s=0,i=[];++n<o;){var a=t[n];r(a,n,t)&&(i[s++]=a)}return i}:function(){return[]},$=y;function P(t){if(null!=t){try{return st.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Tt(t,e){return t===e||t!=t&&e!=e}(s&&$(new s(new ArrayBuffer(1)))!=H||p&&$(new p)!=N||h&&$(h.resolve())!=x||d&&$(new d)!=A||o&&$(new o)!=r)&&($=function(t){var e=y(t),t=e==z?t.constructor:void 0,t=t?P(t):"";if(t)switch(t){case ft:return H;case mt:return N;case gt:return x;case bt:return A;case wt:return r}return e});var xt=_t(function(){return arguments}())?_t:function(t){return W(t)&&k.call(t,"callee")&&!ht.call(t,"callee")},V=Array.isArray;var Ot=i||function(){return!1};function Lt(t){if(Dt(t))return t=y(t),t==I||t==j||t==S||t==O}function Rt(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=M}function Dt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function W(t){return null!=t&&"object"==typeof t}var Ct,qt=t?(Ct=t,function(t){return Ct(t)}):function(t){return W(t)&&Rt(t.length)&&!!e[y(t)]};function Ft(t){return(null!=(e=t)&&Rt(e.length)&&!Lt(e)?yt:Mt)(t);var e}Ut.exports=function(t,e){return Et(t,e)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(r,t,e){!function(e){!function(){var t=this.SENSORLIB||{REVISION:"0.0.1"};Object.assign(t,r("./sensors")),Object.assign(t,r("./error")),Object.assign(t,r("./actuators")),Object.assign(t,r("./util")),e.SENSORLIB=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./actuators":7,"./error":10,"./sensors":21,"./util":24}],3:[function(t,e,r){var n=t("./Subscriber.js");const o=t("../error/NotSupportedError");class s extends n{constructor(t,e){if(super(t,e),this.topic.messageType="std_msgs/Bool",!("mediaDevices"in navigator))throw new o("Browser does not support this feature");navigator.mediaDevices.enumerateDevices().then(t=>{t=t.filter(t=>"videoinput"===t.kind);if(0===t.length)throw Error("No camera found on this device");t=t[t.length-1];navigator.mediaDevices.getUserMedia({video:{deviceId:t.deviceId,facingMode:["user","environment"],height:{ideal:1080},width:{ideal:1920}}}).then(t=>{this.track=t.getVideoTracks()[0],this.imageCapture=new ImageCapture(this.track)})})}onMessage(t){this.imageCapture.getPhotoCapabilities().then(()=>{this.track.applyConstraints({advanced:[{torch:t.data}]})})}}e.exports=s},{"../error/NotSupportedError":8,"./Subscriber.js":5}],4:[function(t,e,r){var n=t("./Subscriber");const a=t("../error/NotSupportedError");class s extends n{constructor(t,e,r,n=!0){if(super(t,e),!(r instanceof window.HTMLCanvasElement))throw new TypeError("canvas argument must be of type HTMLCanvasElement");this.topic.messageType="sensor_msgs/CompressedImage",this.canvas=r,this.compressed=n,this.topic.messageType=this.getMessageType()}getMessageType(){return this.compressed?"sensor_msgs/CompressedImage":"sensor_msgs/Image"}static createImageDataUrl(t,e){return"data:image/"+t+";base64,"+e}drawImage(t){const e=this.canvas,r=e.getContext("2d"),n=new window.Image;n.onload=function(){r.drawImage(n,0,0,e.width,e.height)},n.onerror=function(){throw Error("could not draw image")},n.src=t}static convertImageData(t,e,r){if("rgb8"!==e&&"rgba8"!==e)throw new a("Subscriber only supports uncompressed images in rgb8 or rgba8 format");var n="rgba8"===e;const o=window.atob(t),s=new Uint8ClampedArray(4*r);let i=0;for(let t=0;t<s.length;t++)n||t%4!=3?(s[t]=o.charCodeAt(i),i++):s[t]=255;return s}onMessage(t){let e;if(this.compressed)e=s.createImageDataUrl(t.format,t.data);else{const n=document.createElement("canvas"),o=(n.width=t.width,n.height=t.height,n.getContext("2d"));var r=s.convertImageData(t.data,t.encoding,t.width*t.height),r=new window.ImageData(r,t.width,t.height);o.putImageData(r,0,0),e=n.toDataURL()}this.drawImage(e)}}e.exports=s},{"../error/NotSupportedError":8,"./Subscriber":5}],5:[function(t,e,r){e.exports=class{constructor(t,e){if(!(t instanceof ROSLIB.Ros))throw new TypeError("ros argument was not of type ROSLIB.Ros");if("string"!=typeof e)throw new TypeError("topicName argument was not of type String");this.ros=t,this.topicName=e,this.topic=new ROSLIB.Topic({ros:this.ros,name:this.topicName}),this.started=!1,this.onMessage=this.onMessage.bind(this)}onMessage(t){throw Error("onMessage method not defined!")}start(){if(this.started)throw new Error("Subscriber already started");this.topic.subscribe(this.onMessage),this.started=!0}stop(){if(!this.started)throw new Error("Subscriber did not start yet");this.topic.unsubscribe(this.onMessage),this.started=!1}}},{}],6:[function(t,e,r){t=t("./Subscriber.js");class n extends t{constructor(t,e,r){if(super(t,e),!(r instanceof window.HTMLElement))throw new TypeError("HTMLElement argument was not of type HTMLElement");this.topic.messageType="std_msgs/String",this.HTMLElement=r}onMessage(t){this.HTMLElement.innerHTML=t.data}}e.exports=n},{"./Subscriber.js":5}],7:[function(t,e,r){e.exports={TextSubscriber:t("./TextSubscriber"),ImageSubscriber:t("./ImageSubscriber"),FlashlightSubscriber:t("./FlashlightSubscriber")}},{"./FlashlightSubscriber":3,"./ImageSubscriber":4,"./TextSubscriber":6}],8:[function(t,e,r){class n extends Error{constructor(t){super(t),this.name="NotSupportedError"}}e.exports=n},{}],9:[function(t,e,r){class n extends Error{constructor(t){super(t),this.name="PermissionDeniedError"}}e.exports=n},{}],10:[function(t,e,r){e.exports={NotSupportedError:t("./NotSupportedError")}},{"./NotSupportedError":8}],11:[function(t,e,r){t=t("./SensorPublisher.js");class s extends t{constructor(t,e,r){if(super(t,e),!(r instanceof window.HTMLButtonElement))throw new TypeError("button argument was not of type HTMLButtonElement");this.topic.messageType="std_msgs/Bool",this.button=r;let n=!1;this.onMouseDown=function(t){t.preventDefault(),n||(n=!0,t=this.createBoolMsg(!0),this.topic.publish(t))}.bind(this),this.onMouseUp=function(t){t.preventDefault(),n&&(n=!1,t=this.createBoolMsg(!1),this.topic.publish(t))}.bind(this)}createBoolMsg(t){return new ROSLIB.Message({data:t})}start(){super.start(),this.button.addEventListener("mousedown",this.onMouseDown),this.button.addEventListener("touchstart",this.onMouseDown),this.button.addEventListener("mouseup",this.onMouseUp),this.button.addEventListener("mouseleave",this.onMouseUp),this.button.addEventListener("touchend",this.onMouseUp),this.button.addEventListener("touchcancel",this.onMouseUp)}stop(){super.stop(),this.button.removeEventListener("mousedown",this.onMouseDown),this.button.removeEventListener("touchstart",this.onMouseDown),this.button.removeEventListener("mouseup",this.onMouseUp),this.button.removeEventListener("mouseleave",this.onMouseUp),this.button.removeEventListener("touchend",this.onMouseUp),this.button.removeEventListener("touchcancel",this.onMouseUp)}static readFromConfig(t,e,r){var n=window.document.createElement("button");r.appendChild(n);const o=new s(t,"/mirte/phone_button/"+e.name,n,e.frequency);return o.start(),o}}e.exports=s},{"./SensorPublisher.js":18}],12:[function(t,e,r){t=t("./IntervalPublisher");class i extends t{constructor(t,e,r,n,o=10){if(super(t,e,o),!(r instanceof window.HTMLVideoElement))throw new TypeError("camera argument was not of type HTMLVideoElement");if(!(n instanceof window.HTMLCanvasElement))throw new TypeError("canvas argument was not of type HTMLCanvasElement");this.camera=r,this.canvas=n,this.topic.messageType="sensor_msgs/CompressedImage"}createSnapshot(){this.canvas.getContext("2d").drawImage(this.camera,0,0,this.canvas.width,this.canvas.height);const t=this.canvas.toDataURL("image/jpeg");var e=new ROSLIB.Message({format:"jpeg",data:t.replace("data:image/jpeg;base64,","")});this.msg=e,super.createSnapshot()}start(){if(!this.camera.srcObject)throw new Error("No video source found.");super.start()}static readFromConfig(t,e){var r=document.getElementById(e.cameraId),n=document.getElementById(e.canvasId),o="mirte/phone_camera/"+e.name;const s=new i(t,o,r,n);return s.start(),s.setPublishFrequency(e.frequency),s}}e.exports=i},{"./IntervalPublisher":16}],13:[function(t,e,r){var n=t("./IntervalPublisher.js");const o=t("../error/PermissionDeniedError.js"),s=t("../error/NotSupportedError");class i extends n{constructor(t,e,r=90,n=0,o=10){if(super(t,e,o),"number"!=typeof r||"number"!=typeof n)throw new TypeError("Coordinates were not of type Number");if(90<r||r<-90||180<n||n<-180)throw new Error("Range of given coordinates is invalid");if(this.topic.messageType="std_msgs/Int32",this.compass=0,this.lat=r,this.lng=n,this.orientationReady=!1,this.gpsReady=!1,this.watchId=-1,!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),!window.navigator.geolocation)throw new s("Unable to create GPSPublisher, Geolocation API not supported")}start(){super.start(),window.addEventListener("deviceorientationabsolute",t=>{t.isTrusted&&this.onReadOrientation(t)},!0),this.watchId=window.navigator.geolocation.watchPosition(this.locationHandler.bind(this),t=>{throw Error("failed to watch position")})}stop(){super.stop(),window.navigator.geolocation.clearWatch(this.watchId)}requestPermission(){const e=window.document.createElement("button");e.innerHTML="Request Motion Sensor Permission",e.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(t=>{if("granted"===t)return e.remove(),!0;throw new o("No permission granted for Device Orientation")})}),window.document.body.appendChild(e)}onError(t){throw console.log("Error: "+t),Error("ERROR!")}calcDegreeToPoint(t,e){if(t===this.lat&&e===this.lng)return 0;var r=this.lat*Math.PI/180,n=this.lng*Math.PI/180,t=t*Math.PI/180,e=e*Math.PI/180,r=180/Math.PI*Math.atan2(Math.sin(n-e),Math.cos(t)*Math.tan(r)-Math.sin(t)*Math.cos(n-e));let o=Math.round(r);return o=360===(o+=180)?0:o}locationHandler(t){var{latitude:t,longitude:e}=t.coords;this.compass=this.calcDegreeToPoint(t,e),this.gpsReady=!0}onReadOrientation(t){this.alpha=Math.round(Math.abs(t.alpha-360)),this.orientationReady=!0}accountForRotation(){let t=this.compass-this.alpha;return t=t<0?360+t:t}createSnapshot(){if(!this.orientationReady||!this.gpsReady)throw Error("Orientation is not read yet!");this.compass=this.accountForRotation();var t=new ROSLIB.Message({data:this.compass});this.msg=t,super.createSnapshot()}static readFromConfig(t,e){var r="mirte/phone_gps_declination/"+e.name;const n=new i(t,r);return n.start(),n.setPublishFrequency(e.frequency),n}}e.exports=i},{"../error/NotSupportedError":8,"../error/PermissionDeniedError.js":9,"./IntervalPublisher.js":16}],14:[function(t,e,r){var n=t("./IntervalPublisher");const o=t("../error/NotSupportedError");class s extends n{constructor(t,e,r=1){if(super(t,e,r),this.topic.messageType=s.messageType,this.watchId=-1,this.position=void 0,!window.navigator.geolocation)throw new o("Unable to create GPSPublisher, Geolocation API not supported")}static get messageType(){return"sensor_msgs/NavSatFix"}start(){super.start();var t=function(t){this.position=t}.bind(this);this.watchId=window.navigator.geolocation.watchPosition(t,function(t){throw t})}stop(){super.stop(),window.navigator.geolocation.clearWatch(this.watchId)}static createNavSatMessage(t){return new ROSLIB.Message({latitude:t.latitude,longitude:t.longitude,position_covariance_type:0})}createSnapshot(){var t;this.position&&(t=this.position.coords,t=s.createNavSatMessage(t),this.msg=t,super.createSnapshot())}static readFromConfig(t,e){var r="mirte/phone_gps/"+e.name;const n=new s(t,r);return n.start(),n.setPublishFrequency(e.frequency),n}}e.exports=s},{"../error/NotSupportedError":8,"./IntervalPublisher":16}],15:[function(t,e,r){var n=t("./IntervalPublisher.js");const o=t("../error/PermissionDeniedError.js"),s=t("../util/MathUtils.js");class i extends n{constructor(t,e,r=5){super(t,e,r),this.topic.messageType="sensor_msgs/Imu",this.orientationReady=!1,this.motionReady=!1,this.alpha=0,this.beta=0,this.gamma=0,this.valpha=0,this.vbeta=0,this.vgamma=0,!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),window.addEventListener("deviceorientation",t=>{t.isTrusted&&this.onReadOrientation.bind(this)(t)}),window.DeviceMotionEvent?window.addEventListener("devicemotion",t=>{t.isTrusted&&this.onReadMotion.bind(this)(t)}):window.alert("acceleration not supported!")}requestPermission(){const e=window.document.createElement("button");e.innerHTML="Request Motion Sensor Permission",e.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(t=>{if("granted"===t)return e.remove(),!0;throw new o("No permission granted for Device Orientation")})}),window.document.body.appendChild(e)}onReadOrientation(t){this.alpha=parseFloat(t.alpha),this.beta=parseFloat(t.beta),this.gamma=parseFloat(t.gamma),this.orientationReady=!0}onReadMotion(t){var e=t.rotationRate,t=t.acceleration;this.x=t.x,this.y=t.y,this.z=t.z,this.valpha=e.alpha,this.vbeta=e.beta,this.vgamma=e.gamma,this.motionReady=!0}createSnapshot(){var t=(this.alpha+360)/360*2*Math.PI%(2*Math.PI),e=(this.beta+360)/360*2*Math.PI%(2*Math.PI),r=(this.gamma+360)/360*2*Math.PI%(2*Math.PI),e=s.quatFromEuler(e,r,t),r=new ROSLIB.Message({header:{frame_id:"world"},orientation:{x:e.x,y:e.y,z:e.z,w:e.w},orientation_covariance:[this.orientationReady?0:-1,0,0,0,0,0,0,0,0],angular_velocity:{x:this.vbeta,y:this.vgamma,z:this.valpha},angular_velocity_covariance:[this.motionReady?0:-1,0,0,0,0,0,0,0,0],linear_acceleration:{x:this.x,y:this.y,z:this.z},linear_acceleration_covariance:[this.motionReady?0:-1,0,0,0,0,0,0,0,0]});this.msg=r,super.createSnapshot()}static readFromConfig(t,e){var r="mirte/phone_imu/"+e.name;const n=new i(t,r);return n.start(),n.setPublishFrequency(e.frequency),n}}e.exports=i},{"../error/PermissionDeniedError.js":9,"../util/MathUtils.js":22,"./IntervalPublisher.js":16}],16:[function(t,e,r){var n=t("./SensorPublisher");const o=t("lodash.isequal");class s extends n{constructor(t,e,r=10){if(super(t,e),r<=0)throw new Error("Cannot construct with frequency: "+r);this.freq=r,this.msg=null,this.alReadyPublishedMsg=null}createSnapshot(){o(this.msg,this.alReadyPublishedMsg)||(this.topic.publish(this.msg),this.alReadyPublishedMsg=this.msg)}start(){super.start();var t=1e3/this.freq,e=this.createSnapshot.bind(this);this.timer=setInterval(e,t)}stop(){super.stop(),clearInterval(this.timer)}setPublishFrequency(t){if(t<=0)throw new Error("Publisher cannot publish on frequency "+t+" Hz, frequency remained "+this.freq);this.freq=t,this.started&&(this.stop(),this.start())}}e.exports=s},{"./SensorPublisher":18,"lodash.isequal":1}],17:[function(t,e,r){const n=t("../error/PermissionDeniedError.js");t=t("./IntervalPublisher.js");class o extends t{constructor(t,e,r=10){super(t,e,r),this.topic.messageType="std_msgs/Int32",this.orientationReady=!1}start(){super.start(),!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),window.addEventListener("deviceorientationabsolute",t=>{t.isTrusted&&this.onReadOrientation(t)},!0)}requestPermission(){const e=window.document.createElement("button");e.innerHTML="Request Motion Sensor Permission",e.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(t=>{if("granted"===t)return e.remove(),!0;throw new n("No permission granted for Device Orientation")})}),window.document.body.appendChild(e)}onError(t){throw console.log("Error: "+t),Error("ERROR!")}onReadOrientation(t){this.alpha=Math.round(Math.abs(t.alpha-360)),this.orientationReady=!0}createSnapshot(){if(!this.orientationReady)throw Error("Orientation is not read yet!");var t=new ROSLIB.Message({data:this.alpha});this.msg=t,super.createSnapshot()}static readFromConfig(t,e){var r="mirte/phone_magnetic_declination/"+e.name;const n=new o(t,r);return n.start(),n.setPublishFrequency(e.frequency),n}}e.exports=o},{"../error/PermissionDeniedError.js":9,"./IntervalPublisher.js":16}],18:[function(t,e,r){e.exports=class{constructor(t,e){if(!(t instanceof ROSLIB.Ros))throw new TypeError("ros argument was not of type ROSLIB.Ros");if("string"!=typeof e)throw new TypeError("topicName argument was not of type String");this.ros=t,this.topicName=e,this.topic=new ROSLIB.Topic({ros:this.ros,name:this.topicName}),this.started=!1}start(){if(this.started)throw new Error("Publisher already started");this.started=!0}stop(){if(!this.started)throw new Error("Publisher did not start yet");this.started=!1}static readFromConfig(t,e){throw Error("readFromConfig method not defined!")}}},{}],19:[function(t,e,r){t=t("./IntervalPublisher.js");class s extends t{constructor(t,e,r,n=8){if(super(t,e,n),!(r instanceof window.HTMLInputElement))throw new TypeError("slider argument was not of type HTMLInputElement");if("range"!==r.type)throw new TypeError("slider argument does not have type range");this.topic.messageType="std_msgs/Int32",this.slider=r}createInt32Msg(t){return new ROSLIB.Message({data:t})}createSnapshot(){var t=parseInt(this.slider.value),t=this.createInt32Msg(t);this.msg=t,super.createSnapshot()}static readFromConfig(t,e,r){const n=window.document.createElement("input"),o=(n.type="range",n.min=0,n.max=100,r.appendChild(n),new s(t,"/mirte/phone_slider/"+e.name,n,e.frequency));return o.start(),o}}e.exports=s},{"./IntervalPublisher.js":16}],20:[function(t,e,r){t=t("./SensorPublisher.js");class s extends t{constructor(t,e,r,n){if(super(t,e),this.topic.messageType="std_msgs/String",this.options=void 0===n?{}:n,this.options.onEnter=void 0===this.options.onEnter||this.options.onEnter,this.options.clearOnPublish=void 0===this.options.clearOnPublish||this.options.clearOnPublish,!(r instanceof window.HTMLInputElement))throw new TypeError("input element was not of type HTMLInputElement");if(null!==r.getAttribute("type")&&"text"!==r.getAttribute("type"))throw new TypeError('Input element has to have type attribute "text"');this.inputElement=r,this.onInput=function(){this.publishMessage()}.bind(this),this.onKeyUp=function(t){"Enter"===t.key&&this.publishMessage()}.bind(this)}publishMessage(){var t=this.createStrMsg(this.inputElement.value);this.topic.publish(t),this.options.clearOnPublish&&(this.inputElement.value="")}createStrMsg(t){return new ROSLIB.Message({data:t})}start(){super.start(),this.options.onEnter?this.inputElement.addEventListener("keyup",this.onKeyUp):this.inputElement.addEventListener("input",this.onInput)}stop(){super.stop(),this.options.onEnter?this.inputElement.removeEventListener("keyup",this.onKeyUp):this.inputElement.removeEventListener("input",this.onInput)}static readFromConfig(t,e,r){const n=window.document.createElement("input"),o=(n.type="text",r.appendChild(n),new s(t,"/mirte/phone_text_input/"+e.name,n));return o.start(),o}}e.exports=s},{"./SensorPublisher.js":18}],21:[function(t,e,r){e.exports={ButtonPublisher:t("./ButtonPublisher"),IMUPublisher:t("./IMUPublisher"),SliderPublisher:t("./SliderPublisher"),CameraPublisher:t("./CameraPublisher"),TextPublisher:t("./TextPublisher"),GPSPublisher:t("./GPSPublisher"),MagneticDeclinationPublisher:t("./MagneticDeclinationPublisher"),GPSDeclinationPublisher:t("./GPSDeclinationPublisher")}},{"./ButtonPublisher":11,"./CameraPublisher":12,"./GPSDeclinationPublisher":13,"./GPSPublisher":14,"./IMUPublisher":15,"./MagneticDeclinationPublisher":17,"./SliderPublisher":19,"./TextPublisher":20}],22:[function(t,e,r){e.exports={quatFromEuler:function(t,e,r){const n=Math.cos,o=Math.sin;var s=n(t/2),i=n(e/2),a=n(r/2),t=o(t/2),e=o(e/2),r=o(r/2);return{x:t*i*a+s*e*r,y:s*e*a-t*i*r,z:s*i*r+t*e*a,w:s*i*a-t*e*r}}}},{}],23:[function(t,e,r){const i=t("../sensors/ButtonPublisher"),a=t("../sensors/SliderPublisher"),u=t("../sensors/TextPublisher"),c=t("../actuators/ImageSubscriber"),h=t("../actuators/TextSubscriber");function l(e,r,n){var o=e.id;if(!(o.length<1)){if(!(e instanceof window.HTMLElement))throw new TypeError("element was not instance of HTMLElement");let t;switch(e.constructor.name){case"HTMLButtonElement":t=new i(r,"mirte/phone_button/"+o,e);break;case"HTMLInputElement":"range"===e.type?t=new a(r,"mirte/phone_slider/"+o,e):"text"===e.type&&(t=new u(r,"mirte/phone_text_input/"+o,e));break;case"HTMLCanvasElement":t=new c(r,"mirte/phone_image_output/"+o,e);break;default:t=new h(r,"mirte/phone_text_output/"+o,e)}var s=t.topic.name;if(n.has(s))throw new Error(`topic name ${s} already published`);t.start(),n.set(s,t)}}e.exports={publishChildElements:function e(r,n,o){if(o=o||new Map,!(n instanceof ROSLIB.Ros))throw new TypeError("ros argument must be of type ROSLIB.Ros");if(!(r instanceof window.HTMLElement))throw new TypeError("parentElement argument must be of type HTMLElement");if(!(o instanceof Map))throw new TypeError("map argument must be of type Map");if(0===r.children)return o;for(let t=0;t<r.childElementCount;t++){var s=r.children[t];l(s,n,o),e(s,n,o)}return o},tryPublishElement:l}},{"../actuators/ImageSubscriber":4,"../actuators/TextSubscriber":6,"../sensors/ButtonPublisher":11,"../sensors/SliderPublisher":19,"../sensors/TextPublisher":20}],24:[function(t,e,r){Object.assign(e.exports,t("./mirteUtil")),Object.assign(e.exports,t("./documentUtils")),Object.assign(e.exports,t("./MathUtils"))},{"./MathUtils":22,"./documentUtils":23,"./mirteUtil":25}],25:[function(t,e,r){var n=t("../sensors/GPSPublisher"),o=t("../sensors/IMUPublisher"),s=t("../sensors/MagneticDeclinationPublisher"),i=t("../sensors/GPSDeclinationPublisher"),a=t("../sensors/CameraPublisher"),u=t("../sensors/SliderPublisher"),c=t("../sensors/ButtonPublisher"),t=t("../sensors/TextPublisher");const h={phone_imu:o.readFromConfig,phone_magnetic_declination:s.readFromConfig,phone_gps:n.readFromConfig,phone_gps_declination:i.readFromConfig,phone_camera:a.readFromConfig,phone_slider:u.readFromConfig,phone_button:c.readFromConfig,phone_text_input:t.readFromConfig};e.exports={readSensorsFromConfig:function(t,e,r){const n=new Map;for(const i of Object.keys(h)){var o=t[i];if(o)for(const a of Object.values(o)){const u=h[i];var s=u(e,a,r);n.set(s.topic.name,s)}}return n}}},{"../sensors/ButtonPublisher":11,"../sensors/CameraPublisher":12,"../sensors/GPSDeclinationPublisher":13,"../sensors/GPSPublisher":14,"../sensors/IMUPublisher":15,"../sensors/MagneticDeclinationPublisher":17,"../sensors/SliderPublisher":19,"../sensors/TextPublisher":20}]},{},[2]);